import{_ as D,p as b,h as m,v as M,c as r,o,j as s,t as d,e as y,ag as z,ah as A,F as k,B,n as O,N as G,k as R,a0 as W,G as q,ai as F,a as L}from"./chunks/framework.BOb-TpcB.js";import{B as U,A as j,c as H,T as J}from"./chunks/badges.CQxF51oA.js";import{l as K,a as Q}from"./chunks/dataLoader._K4l77em.js";const X={class:"badge-gallery"},Y={key:0,class:"status-box loading"},Z={key:1,class:"status-box error"},tt={key:2},et={class:"stats-row"},st={class:"stat-card"},at={class:"stat-number"},lt={class:"stat-card"},dt={class:"stat-number"},rt={key:0,class:"stat-card"},ot={class:"stat-number"},nt={class:"stat-label"},it={class:"filter-bar"},ct=["value"],ut={class:"badge-grid"},vt={class:"badge-icon"},_t={class:"badge-name"},ht={class:"badge-desc"},gt={class:"tier-list"},bt=["onClick"],mt={class:"tier-header"},pt={class:"tier-label"},ft={class:"tier-threshold"},yt={class:"tier-count"},kt={class:"tier-arrow"},Bt={key:0,class:"no-members"},St=["src","alt"],$t=["href"],Ct={class:"member-value"},Tt={key:1,class:"more-hint"},xt={__name:"BadgeGallery",setup(N){const S=b(!0),c=b(null),$=b([]),p=b(""),_=b(null);function I(a,e){return e!=null&&e.user_commits?a.map(t=>{var l;return{...t,night_owl_percentage:((l=e.user_commits[t.id])==null?void 0:l.night_owl_percentage)||0}}):a}const h=m(()=>[...U,j]),T=m(()=>{const a=new Map;return $.value.forEach(e=>a.set(e.id,H(e))),a}),x=m(()=>{var e;const a={};h.value.forEach(t=>{a[t.id]={gold:[],silver:[],bronze:[]}});for(const[t,l]of T.value){const n=$.value.find(u=>u.id===t);for(const u of l)(e=a[u.id])!=null&&e[u.tier]&&a[u.id][u.tier].push({...n,badgeValue:u.formatted})}return a}),v=m(()=>{var n,u,w;let a=0;const e=new Set;for(const[f,i]of T.value)a+=i.length,i.length>0&&e.add(f);let t=null,l=1/0;for(const f of h.value){const i=x.value[f.id],C=(((n=i==null?void 0:i.gold)==null?void 0:n.length)||0)+(((u=i==null?void 0:i.silver)==null?void 0:u.length)||0)+(((w=i==null?void 0:i.bronze)==null?void 0:w.length)||0);C>0&&C<l&&(l=C,t=f)}return{totalBadges:a,membersWithBadges:e.size,rarestBadge:t,rarestCount:l}}),V=m(()=>p.value?h.value.filter(a=>a.id===p.value):h.value);function E(a,e){const t=`${a}-${e}`;_.value=_.value===t?null:t}function g(a,e){var t;return((t=x.value[a])==null?void 0:t[e])||[]}function P(a){return a.avatar&&a.avatar.startsWith("avatars/")?`/members-visualization/${a.avatar}`.replace(/\/+/g,"/"):a.avatar||`https://github.com/${a.id}.png`}return M(async()=>{try{const[a,e]=await Promise.all([K(),Q()]);$.value=I(a,e)}catch(a){c.value=a.message}finally{S.value=!1}}),(a,e)=>(o(),r("div",X,[S.value?(o(),r("div",Y,[...e[2]||(e[2]=[s("p",null,"正在加载数据...",-1)])])):c.value?(o(),r("div",Z,[s("p",null,"加载失败: "+d(c.value),1)])):(o(),r("div",tt,[s("div",et,[s("div",st,[s("div",at,d(v.value.totalBadges),1),e[3]||(e[3]=s("div",{class:"stat-label"},"徽章总数",-1))]),s("div",lt,[s("div",dt,d(v.value.membersWithBadges),1),e[4]||(e[4]=s("div",{class:"stat-label"},"获徽章成员",-1))]),v.value.rarestBadge?(o(),r("div",rt,[s("div",ot,d(v.value.rarestBadge.icon),1),s("div",nt,"最稀有: "+d(v.value.rarestBadge.name)+" ("+d(v.value.rarestCount)+"人)",1)])):y("",!0)]),s("div",it,[e[6]||(e[6]=s("label",{class:"filter-label"},"筛选类别",-1)),z(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),class:"filter-select"},[e[5]||(e[5]=s("option",{value:""},"全部徽章",-1)),(o(!0),r(k,null,B(h.value,t=>(o(),r("option",{key:t.id,value:t.id},d(t.icon)+" "+d(t.name),9,ct))),128))],512),[[A,p.value]])]),s("div",ut,[(o(!0),r(k,null,B(V.value,t=>(o(),r("div",{key:t.id,class:"badge-card"},[s("div",vt,d(t.icon),1),s("div",_t,d(t.name),1),s("div",ht,d(t.description),1),s("div",gt,[(o(!0),r(k,null,B(t.tiers||[],l=>(o(),r("div",{key:l.level,class:O(["tier-row",{expanded:_.value===`${t.id}-${l.level}`}]),onClick:n=>E(t.id,l.level)},[s("div",mt,[s("span",{class:"tier-dot",style:G({background:R(J)[l.level]})},null,4),s("span",pt,d(l.label),1),s("span",ft,"≥ "+d(l.threshold),1),s("span",yt,d(g(t.id,l.level).length)+" 人",1),s("span",kt,d(_.value===`${t.id}-${l.level}`?"▾":"▸"),1)]),_.value===`${t.id}-${l.level}`?(o(),r("div",{key:0,class:"tier-members",onClick:e[1]||(e[1]=W(()=>{},["stop"]))},[g(t.id,l.level).length===0?(o(),r("div",Bt,"暂无成员")):y("",!0),(o(!0),r(k,null,B(g(t.id,l.level).slice(0,20),n=>(o(),r("div",{key:n.id,class:"member-row"},[s("img",{src:P(n),alt:n.name||n.id,class:"member-avatar",loading:"lazy"},null,8,St),s("a",{href:n.github||`https://github.com/${n.id}`,target:"_blank",class:"member-name"},d(n.name||n.id),9,$t),s("span",Ct,d(n.badgeValue),1)]))),128)),g(t.id,l.level).length>20?(o(),r("div",Tt," 还有 "+d(g(t.id,l.level).length-20)+" 位成员... ",1)):y("",!0)])):y("",!0)],10,bt))),128))])]))),128))])]))]))}},wt=D(xt,[["__scopeId","data-v-3ce8c8af"]]),Pt=JSON.parse('{"title":"🏅 成就徽章","description":"","frontmatter":{},"headers":[],"relativePath":"badges.md","filePath":"badges.md","lastUpdated":1771441475000}'),Nt={name:"badges.md"},Dt=Object.assign(Nt,{setup(N){return(S,c)=>(o(),r("div",null,[c[0]||(c[0]=s("h1",{id:"🏅-成就徽章",tabindex:"-1"},[L("🏅 成就徽章 "),s("a",{class:"header-anchor",href:"#🏅-成就徽章","aria-label":'Permalink to "🏅 成就徽章"'},"​")],-1)),c[1]||(c[1]=s("p",null,"基于贡献数据自动计算的成就徽章，展示社区成员的多维度成就。点击等级可查看获得该徽章的成员。",-1)),q(wt),c[2]||(c[2]=F('<h2 id="徽章计算规则" tabindex="-1">徽章计算规则 <a class="header-anchor" href="#徽章计算规则" aria-label="Permalink to &quot;徽章计算规则&quot;">​</a></h2><table tabindex="0"><thead><tr><th>徽章</th><th>数据来源</th><th>铜牌</th><th>银牌</th><th>金牌</th></tr></thead><tbody><tr><td>🌟 Star 收割机</td><td>参与的组织仓库总 Stars</td><td>≥10,000</td><td>≥50,000</td><td>≥100,000</td></tr><tr><td>🔥 高产贡献者</td><td>组织仓库贡献次数</td><td>≥50</td><td>≥200</td><td>≥500</td></tr><tr><td>📦 多面手</td><td>参与的组织仓库数</td><td>≥3</td><td>≥5</td><td>≥10</td></tr><tr><td>👥 社区影响力</td><td>GitHub 关注者数</td><td>≥50</td><td>≥200</td><td>≥500</td></tr><tr><td>🎯 领域专家</td><td>涉猎的研究方向数</td><td>≥3</td><td>≥5</td><td>≥8</td></tr><tr><td>🦉 夜猫子</td><td>深夜提交比例（北京时间 22:00-06:00）</td><td>≥30%</td><td>≥50%</td><td>≥70%</td></tr><tr><td>🏆 全能选手</td><td>已获得的徽章类别数</td><td>≥4 类</td><td>≥5 类</td><td>≥6 类</td></tr></tbody></table><p>每类徽章从金牌开始匹配，命中即停。全能选手是特殊的&quot;元徽章&quot;——先计算前 6 类，再根据获得的不同类别数定级。</p>',3))]))}});export{Pt as __pageData,Dt as default};
