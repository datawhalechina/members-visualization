const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/index.CDjEh1uI.js","assets/chunks/index.BiBfcChI.js"])))=>i.map(i=>d[i]);
import{_ as q,p as x,q as te,c as w,o as $,j as e,F as Y,B as X,n as ae,t as b,a as B,e as G,v as K,G as U,h as Q,P as V,V as se,x as oe,N as ne,ag as ee,aj as re,ah as le}from"./chunks/framework.BOb-TpcB.js";import{i as W,L as ie}from"./chunks/index.BiBfcChI.js";const ce={class:"organization-table"},de={class:"rank-number"},ue={class:"name-cell"},me={key:0,href:"https://github.com/datawhalechina",target:"_blank",rel:"noopener noreferrer",class:"datawhale-link"},fe={key:0,class:"positive"},ve={key:1,class:"negative"},pe={key:2},he={__name:"OrganizationTable",props:{organizationData:{type:Array,default:()=>[]}},setup(H){const g=H,f=x(g.organizationData),y=l=>l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return te(()=>g.organizationData,l=>{f.value=l},{deep:!0}),(l,z)=>($(),w("table",ce,[z[0]||(z[0]=e("thead",null,[e("tr",null,[e("th",null,"æ’å"),e("th",null,"ç»„ç»‡åç§°"),e("th",null,"Staræ•°"),e("th",null,"æ–°å¢Star"),e("th",null,"æ’åå˜åŒ–")])],-1)),e("tbody",null,[($(!0),w(Y,null,X(f.value,s=>($(),w("tr",{key:s.name,class:ae({"highlight-row":s.name==="datawhalechina"})},[e("td",null,[e("span",de,b(s.rank),1)]),e("td",ue,[s.name==="datawhalechina"?($(),w("a",me,b(s.name),1)):($(),w(Y,{key:1},[B(b(s.name),1)],64))]),e("td",null,b(y(s.star_count)),1),e("td",null,"+"+b(y(s.starAdd)),1),e("td",null,[s.rankAdd<0?($(),w("span",fe,b(`â†‘${Math.abs(s.rankAdd)}`),1)):G("",!0),s.rankAdd>0?($(),w("span",ve,b(`â†“${Math.abs(s.rankAdd)}`),1)):G("",!0),s.rankAdd===0?($(),w("span",pe,b(`${Math.abs(s.rankAdd)}`),1)):G("",!0)])],2))),128))])]))}},be=q(he,[["__scopeId","data-v-efd1a9cc"]]),ge={class:"wrapper"},ye={key:0,class:"loading"},_e={key:1,class:"error"},we={__name:"Organization",setup(H){const g=x([]),f=x(!1),y=x(null),l=async()=>{const s="/members-visualization/data/datawhalechina/organization_datasource.json".replace(/\/+/g,"/"),R=await fetch(s);if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);return(await R.json()).top10KnowledgeSharingOrganizationInfo};return K(async()=>{try{f.value=!0,y.value=null,g.value=await l()}catch(z){y.value=z.message}finally{f.value=!1}}),(z,s)=>($(),w("div",ge,[f.value?($(),w("div",ye,[...s[0]||(s[0]=[e("p",null,"æ­£åœ¨åŠ è½½æ•°æ®...",-1)])])):y.value?($(),w("div",_e,[e("p",null,"åŠ è½½æ•°æ®æ—¶å‡ºé”™: "+b(y.value),1)])):G("",!0),U(be,{"organization-data":g.value},null,8,["organization-data"])]))}},$e=q(we,[["__scopeId","data-v-516cda31"]]),xe={class:"charts"},Se={key:0,class:"loading"},ke={key:1,class:"error"},De={key:2},Ce={class:"stats-overview"},ze={class:"stat-card"},Oe={class:"stat-number"},Pe={class:"stat-card"},Me={class:"stat-number"},je={class:"stat-card"},Ee={class:"stat-number"},Le={class:"stat-card"},Te={class:"stat-number"},Ae={class:"chart-container"},Ne={class:"chart-container"},Re={key:0,class:"chart-container"},Ie={key:1,class:"chart-container"},We={class:"chart-container"},Be={__name:"Charts",setup(H){const g=x(!1),f=x(!1),y=x(null),l=x(null),z=x(null),s=x(null),R=x(!0),O=x(null),T=x([]),c=x({});let o=null,d=null,u=null,m=null;const P=()=>{typeof window<"u"&&(f.value=document.documentElement.classList.contains("dark"))},S=()=>f.value?"dark":"light",h=()=>f.value?{textColor:"#ffffff",backgroundColor:"#1a1a1a",axisLineColor:"#484848",splitLineColor:"#484848"}:{textColor:"#333333",backgroundColor:"#ffffff",axisLineColor:"#e0e0e0",splitLineColor:"#f0f0f0"},k=()=>{const p=Object.entries(c.value).sort((t,r)=>r[1]-t[1]).slice(0,10).map(([t,r])=>({name:t,value:r}));return{title:{text:"ç ”ç©¶æ–¹å‘åˆ†å¸ƒ",subtext:"æˆå‘˜ç ”ç©¶æ–¹å‘ç»Ÿè®¡",left:"center",textStyle:{fontSize:20,fontWeight:"bold",color:h().textColor},subtextStyle:{fontSize:14,color:f.value?"#cccccc":"#666666"}},tooltip:{trigger:"item",formatter:function(t){const r=t.percent,C=t.value;return`${t.seriesName}<br/>${t.name}: ${C} äºº (${r}%)`}},legend:{orient:"vertical",left:"left",top:"middle",itemGap:12,textStyle:{fontSize:12,color:h().textColor}},series:[{name:"ç ”ç©¶æ–¹å‘",type:"pie",radius:["40%","70%"],center:["60%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:p,animationType:"scale",animationEasing:"elasticOut",animationDelay:function(t){return Math.random()*200}}]}},i=()=>{const p=Object.entries(c.value).sort((t,r)=>r[1]-t[1]).slice(0,15);return{title:{text:"ç ”ç©¶æ–¹å‘ç»Ÿè®¡",subtext:`å¹³å‡æ¯äººæ¶‰åŠ ${v.value.avgDomainsPerMember} ä¸ªæ–¹å‘`,left:"center",textStyle:{fontSize:20,fontWeight:"bold",color:h().textColor},subtextStyle:{fontSize:14,color:f.value?"#cccccc":"#666666"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 0, 0, 0.1)"}},formatter:function(t){const r=t[0],C=T.value.length,L=(r.value/C*100).toFixed(1);return`${r.name}<br/>æˆå‘˜æ•°é‡: ${r.value} äºº<br/>å æ¯”: ${L}%`}},grid:{left:"5%",right:"5%",bottom:"15%",top:"20%",containLabel:!0},xAxis:{type:"category",data:p.map(([t,r])=>t),axisLabel:{rotate:45,interval:0,fontSize:12,color:h().textColor},axisLine:{lineStyle:{color:h().axisLineColor}}},yAxis:{type:"value",name:"æˆå‘˜æ•°é‡",nameTextStyle:{color:h().textColor,fontSize:12},axisLabel:{color:h().textColor},axisLine:{lineStyle:{color:h().axisLineColor}},splitLine:{lineStyle:{color:h().splitLineColor}}},series:[{name:"æˆå‘˜æ•°é‡",type:"bar",barWidth:"60%",data:p.map(([t,r],C)=>({value:r,itemStyle:{color:new ie(0,0,0,1,[{offset:0,color:`hsl(${C*30%360}, 70%, 60%)`},{offset:1,color:`hsl(${C*30%360}, 70%, 40%)`}])}})),animationDelay:function(t){return t*50}}]}},D=()=>{const p=Object.entries(c.value).filter(([t,r])=>t&&t.trim()&&r>0).sort((t,r)=>r[1]-t[1]).slice(0,30).map(([t,r],C)=>({name:t.trim(),value:r,textStyle:{fontSize:Math.max(14,Math.min(40,r*4+16)),color:A()[C%A().length]}}));return console.log("è¯äº‘æ•°æ®:",p),{title:{text:"ç ”ç©¶æ–¹å‘è¯äº‘",subtext:"å­—ä½“å¤§å°åæ˜ çƒ­é—¨ç¨‹åº¦",left:"center",textStyle:{fontSize:20,fontWeight:"bold",color:h().textColor},subtextStyle:{fontSize:14,color:f.value?"#cccccc":"#666666"}},tooltip:{formatter:function(t){return`${t.name}: ${t.value} äºº`},backgroundColor:f.value?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.9)",borderColor:f.value?"#666":"#ccc",textStyle:{color:f.value?"#fff":"#333"}},backgroundColor:"transparent",series:[{type:"wordCloud",gridSize:4,sizeRange:[14,40],rotationRange:[-45,45],rotationStep:15,shape:"circle",left:"center",top:"center",width:"85%",height:"75%",right:null,bottom:null,drawOutOfBound:!1,layoutAnimation:!0,textStyle:{fontFamily:"Arial, Microsoft YaHei, sans-serif",fontWeight:"bold"},emphasis:{focus:"self",textStyle:{shadowBlur:8,shadowColor:f.value?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",textBorderColor:f.value?"#fff":"#000",textBorderWidth:1}},data:p}]}},A=()=>f.value?["#6b9bd2","#a5d86c","#ffcc5c","#ff7875","#87ceeb","#52c41a","#ff9c6e","#b37feb","#f759ab","#36cfc9","#ffc53d","#ff85c0","#95de64","#5cdbd3","#85a5ff"]:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#13c2c2","#faad14","#eb2f96","#52c41a","#1890ff","#722ed1"],j=()=>{const p=T.value.filter(a=>a&&a.name&&(a.id||a.name)),t=Object.keys(c.value).filter(a=>a&&a.trim()),r=new Set,C=p.map(a=>{const _=`member_${a.id||a.name}`;return r.has(_)?(console.warn(`é‡å¤çš„æˆå‘˜èŠ‚ç‚¹ID: ${_}`),null):(r.add(_),{id:_,name:a.name,category:0,symbolSize:Math.max(20,Math.min(50,Math.log2((a.domain&&Array.isArray(a.domain)?a.domain.length:1)+1)*15)),itemStyle:{color:"#5470c6"}})}).filter(Boolean),L=new Set,M=t.map(a=>{const _=`domain_${a}`;if(L.has(_))return console.warn(`é‡å¤çš„ç ”ç©¶æ–¹å‘èŠ‚ç‚¹ID: ${_}`),null;L.add(_);const N=c.value[a]||1;return{id:_,name:a,category:1,symbolSize:Math.max(25,Math.min(80,Math.log2(N+1)*20)),itemStyle:{color:"#91cc75"}}}).filter(Boolean),I=[...C,...M],F=[],n=new Set;return p.forEach(a=>{const _=`member_${a.id||a.name}`;r.has(_)&&a.domain&&Array.isArray(a.domain)&&a.domain.forEach(N=>{if(N&&N.trim()){const J=`domain_${N}`,Z=`${_}-${J}`;!n.has(Z)&&L.has(J)&&(n.add(Z),F.push({source:_,target:J,lineStyle:{color:f.value?"#666":"#999",width:2,opacity:.6}}))}})}),{tooltip:{trigger:"item",formatter:function(a){var _;if(a.dataType==="node")if(a.data.category===0){const N=((_=T.value.find(J=>J.name===a.data.name))==null?void 0:_.domain)||[];return`æˆå‘˜: ${a.data.name}<br/>ç ”ç©¶æ–¹å‘: ${N.join(", ")}`}else{const N=c.value[a.data.name]||0;return`ç ”ç©¶æ–¹å‘: ${a.data.name}<br/>æˆå‘˜æ•°é‡: ${N} äºº`}return a.data.name}},legend:{data:["æˆå‘˜","ç ”ç©¶æ–¹å‘"],right:"3%",top:"2%",orient:"vertical",itemGap:15,textStyle:{color:h().textColor,fontSize:12},itemWidth:14,itemHeight:14},series:[{name:"å…³ç³»ç½‘ç»œ",type:"graph",layout:"force",data:I,links:F,categories:[{name:"æˆå‘˜",itemStyle:{color:"#5470c6"}},{name:"ç ”ç©¶æ–¹å‘",itemStyle:{color:"#91cc75"}}],roam:!0,focusNodeAdjacency:!0,draggable:!0,scaleLimit:{min:.5,max:3},center:["50%","50%"],force:{repulsion:250,gravity:.6,edgeLength:[20,80],layoutAnimation:!0,friction:.8,initLayout:"circular"},left:80,right:120,top:40,bottom:40,label:{show:!0,position:"right",formatter:"{b}",fontSize:10,color:h().textColor,distance:5},lineStyle:{color:"source",curveness:.2,opacity:.6},emphasis:{focus:"adjacency",lineStyle:{width:6,opacity:.8}}}]}},E=()=>{try{console.log("å¼€å§‹åˆ·æ–°æ‰€æœ‰å›¾è¡¨ä»¥é€‚åº”ä¸»é¢˜å˜åŒ–"),o&&y.value&&(o.dispose(),o=W(y.value,S()),o.setOption(k())),d&&l.value&&(d.dispose(),d=W(l.value,S()),d.setOption(i())),u&&z.value&&g.value&&(u.dispose(),u=W(z.value,S()),u.setOption(D())),m&&s.value&&(m.dispose(),m=W(s.value,S()),m.setOption(j())),console.log("æ‰€æœ‰å›¾è¡¨å·²åˆ·æ–°ä»¥é€‚åº”ä¸»é¢˜å˜åŒ–")}catch(p){console.error("åˆ·æ–°å›¾è¡¨æ—¶å‡ºé”™:",p)}},v=Q(()=>{var C;const p=T.value.length,t=Object.keys(c.value).length,r=p>0?(T.value.reduce((L,M)=>L+M.domain.length,0)/p).toFixed(1):0;return{totalMembers:p,totalDomains:t,avgDomainsPerMember:r,mostPopularDomain:((C=Object.entries(c.value).sort((L,M)=>M[1]-L[1])[0])==null?void 0:C[0])||"æš‚æ— "}});return K(async()=>{try{let p=function(){try{if(o&&o.dispose(),o=W(y.value,S()),!o){console.error("é¥¼å›¾åˆå§‹åŒ–å¤±è´¥");return}o.setOption(k())}catch(n){console.error("é¥¼å›¾åˆå§‹åŒ–å‡ºé”™:",n)}};P(),typeof window<"u"&&new MutationObserver(()=>{const a=document.documentElement.classList.contains("dark");a!==f.value&&(f.value=a,setTimeout(()=>{E()},100))}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),await V();const r="/members-visualization/data/members.json".replace(/\/+/g,"/");console.log("Fetching data from:",r);const C=await fetch(r);if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const M=(await C.json()).map(n=>(Object.keys(n).forEach(a=>{let _=n[a]||"";typeof _=="string"&&(_=_.trim().replace(/^"|"$/g,"")),["domain","repositories"].includes(a)&&(_?_=_.split(";").map(N=>N.trim()).filter(N=>N):_=[]),n[a]=_}),n));T.value=M,console.log("Parsed members:",T.value);const I={};T.value.forEach(n=>{n.domain.forEach(a=>{a&&(I[a]=(I[a]||0)+1)})}),c.value=I,console.log("Domain count:",c.value),R.value=!1,await V(),await new Promise(n=>setTimeout(n,100));try{console.log("å¼€å§‹åŠ è½½è¯äº‘æ’ä»¶...");const n=new Promise((_,N)=>{setTimeout(()=>N(new Error("è¯äº‘æ’ä»¶åŠ è½½è¶…æ—¶")),5e3)}),a=async()=>{if(typeof window<"u"){const _=await se(()=>import("./chunks/index.CDjEh1uI.js"),__vite__mapDeps([0,1]));return console.log("è¯äº‘æ’ä»¶åŠ è½½æˆåŠŸ (å®¢æˆ·ç«¯)",_),!0}return!1};await Promise.race([a(),n]),g.value=!0,console.log("è¯äº‘æ’ä»¶å·²æˆåŠŸå¯ç”¨")}catch(n){console.error("è¯äº‘æ’ä»¶åŠ è½½å¤±è´¥:",n),g.value=!1,console.warn("è¯äº‘å›¾å°†ä¸ä¼šæ˜¾ç¤ºï¼Œä½†ä¸å½±å“å…¶ä»–åŠŸèƒ½")}await V();const F=async(n=5)=>{if(!y.value&&n>0)return console.log(`é¥¼å›¾å®¹å™¨æœªæ‰¾åˆ°ï¼Œç­‰å¾…DOMæ¸²æŸ“... (å‰©ä½™é‡è¯•: ${n})`),await new Promise(a=>setTimeout(a,200)),F(n-1);if(!y.value){console.error("é¥¼å›¾å®¹å™¨æœ€ç»ˆæœªæ‰¾åˆ°ï¼Œè·³è¿‡é¥¼å›¾åˆå§‹åŒ–");return}p()};if(await F(),!l.value)console.warn("æŸ±çŠ¶å›¾å®¹å™¨æœªæ‰¾åˆ°ï¼Œè·³è¿‡æŸ±çŠ¶å›¾åˆå§‹åŒ–");else try{if(d&&d.dispose(),d=W(l.value,S()),!d){console.error("æŸ±çŠ¶å›¾åˆå§‹åŒ–å¤±è´¥");return}d.setOption(i())}catch(n){console.error("æŸ±çŠ¶å›¾åˆå§‹åŒ–å‡ºé”™:",n)}if(g.value&&z.value)try{console.log("å¼€å§‹åˆå§‹åŒ–è¯äº‘å›¾..."),console.log("è¯äº‘æ•°æ®æ¡ç›®æ•°:",Object.entries(c.value).length);const n=z.value;if(console.log("è¯äº‘å®¹å™¨å°ºå¯¸:",{width:n.offsetWidth,height:n.offsetHeight,clientWidth:n.clientWidth,clientHeight:n.clientHeight}),(n.offsetWidth===0||n.offsetHeight===0)&&(console.warn("è¯äº‘å›¾å®¹å™¨å°ºå¯¸ä¸º0ï¼Œè®¾ç½®é»˜è®¤å°ºå¯¸"),n.style.width="100%",n.style.height="450px",await V()),u&&u.dispose(),u=W(n,S()),!u)throw new Error("è¯äº‘å›¾è¡¨å®ä¾‹åˆ›å»ºå¤±è´¥");const a=D();console.log("è¯äº‘å›¾é…ç½®æ•°æ®é¡¹æ•°é‡:",a.series[0].data.length),console.log("è¯äº‘å›¾å‰5é¡¹æ•°æ®:",a.series[0].data.slice(0,5)),u.setOption(a,!0),setTimeout(()=>{u&&!u.isDisposed()&&(u.resize(),console.log("è¯äº‘å›¾é‡æ–°è°ƒæ•´å°ºå¯¸å®Œæˆ"))},200),console.log("è¯äº‘å›¾åˆå§‹åŒ–å®Œæˆ")}catch(n){console.error("è¯äº‘å›¾åˆå§‹åŒ–å¤±è´¥:",n),console.error("é”™è¯¯å †æ ˆ:",n.stack)}else console.warn("è¯äº‘å›¾è·³è¿‡:",{wordCloudLoaded:g.value,wordCloudRef:!!z.value,containerExists:!!z.value,containerVisible:z.value?z.value.offsetWidth>0:!1});if(!s.value)console.warn("ç½‘ç»œå›¾å®¹å™¨æœªæ‰¾åˆ°ï¼Œè·³è¿‡ç½‘ç»œå›¾åˆå§‹åŒ–");else try{if(m=W(s.value,S()),!m){console.error("ç½‘ç»œå›¾åˆå§‹åŒ–å¤±è´¥");return}const n=j();m.setOption(n)}catch(n){console.error("ç½‘ç»œå›¾åˆå§‹åŒ–å‡ºé”™:",n)}window.handleResize=()=>{o==null||o.resize(),d==null||d.resize(),u==null||u.resize(),m==null||m.resize()},window.addEventListener("resize",window.handleResize)}catch(p){console.error("Error loading data:",p),O.value=p.message,R.value=!1}}),oe(()=>{o==null||o.dispose(),d==null||d.dispose(),u==null||u.dispose(),m==null||m.dispose(),window.removeEventListener("resize",window.handleResize)}),(p,t)=>($(),w("div",xe,[R.value?($(),w("div",Se,[...t[0]||(t[0]=[e("p",null,"æ­£åœ¨åŠ è½½æ•°æ®...",-1)])])):O.value?($(),w("div",ke,[e("p",null,"åŠ è½½æ•°æ®æ—¶å‡ºé”™: "+b(O.value),1)])):($(),w("div",De,[e("div",Ce,[e("div",ze,[e("div",Oe,b(v.value.totalMembers),1),t[1]||(t[1]=e("div",{class:"stat-label"},"æ€»æˆå‘˜æ•°",-1))]),e("div",Pe,[e("div",Me,b(v.value.totalDomains),1),t[2]||(t[2]=e("div",{class:"stat-label"},"ç ”ç©¶æ–¹å‘æ•°",-1))]),e("div",je,[e("div",Ee,b(v.value.avgDomainsPerMember),1),t[3]||(t[3]=e("div",{class:"stat-label"},"å¹³å‡æ–¹å‘æ•°/äºº",-1))]),e("div",Le,[e("div",Te,b(v.value.mostPopularDomain),1),t[4]||(t[4]=e("div",{class:"stat-label"},"æœ€çƒ­é—¨æ–¹å‘",-1))])]),e("div",Ae,[e("div",{ref_key:"pieRef",ref:y,class:"chart"},null,512)]),e("div",Ne,[e("div",{ref_key:"barRef",ref:l,class:"chart"},null,512)]),g.value?($(),w("div",Re,[e("div",{ref_key:"wordCloudRef",ref:z,class:"chart","data-chart-type":"wordcloud"},null,512)])):($(),w("div",Ie,[...t[5]||(t[5]=[e("div",{class:"loading"},[e("p",null,"è¯äº‘æ’ä»¶åŠ è½½ä¸­...")],-1)])])),e("div",We,[t[6]||(t[6]=e("div",{class:"chart-title"},[e("h3",null,"æˆå‘˜ä¸ç ”ç©¶æ–¹å‘å…³ç³»ç½‘ç»œ"),e("p",null,"èŠ‚ç‚¹å¤§å°åæ˜ è¿æ¥æ•°é‡ï¼Œæ”¯æŒæ‹–æ‹½å’Œç¼©æ”¾")],-1)),e("div",{ref_key:"networkRef",ref:s,class:"chart-large","data-chart-type":"network"},null,512)])]))]))}},Fe=q(Be,[["__scopeId","data-v-7ee94a5b"]]),He={class:"data-export"},Ve={class:"quick-stats"},Je={class:"stat-grid"},Ue={class:"stat-item"},Ge={class:"stat-value"},qe={class:"stat-item"},Ke={class:"stat-value"},Ye={class:"stat-item"},Qe={class:"stat-value"},Xe={class:"stat-item"},Ze={class:"stat-value"},et={class:"domain-details"},tt={class:"domain-list"},ot={class:"domain-name"},at={class:"domain-stats"},st={class:"count"},nt={class:"percentage"},rt={class:"progress-bar"},lt={class:"export-actions"},it={class:"action-buttons"},ct=["disabled"],dt=["disabled"],ut=["disabled"],mt={key:0,class:"exporting-indicator"},ft={__name:"DataExport",setup(H){const g=x(!1),f=x([]),y=x({}),l=x(!0),z=async()=>{try{const o="/members-visualization/data/members.json".replace(/\/+/g,"/"),d=await fetch(o);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const m=(await d.json()).map(S=>(Object.keys(S).forEach(h=>{let k=S[h]||"";typeof k=="string"&&(k=k.trim().replace(/^"|"$/g,"")),["domain"].includes(h)&&(k?k=k.split(";").map(i=>i.trim()).filter(i=>i):k=[]),S[h]=k}),S));f.value=m;const P={};m.forEach(S=>{S.domain.forEach(h=>{h&&(P[h]=(P[h]||0)+1)})}),y.value=P}catch(c){console.error("DataExportæ•°æ®åŠ è½½å¤±è´¥:",c)}finally{l.value=!1}};K(()=>{z()});const s=Q(()=>{var m,P;const c=f.value.length,o=Object.keys(y.value).length,d=c>0?(f.value.reduce((S,h)=>S+h.domain.length,0)/c).toFixed(2):0,u=Object.entries(y.value).sort((S,h)=>h[1]-S[1]).map(([S,h])=>({domain:S,count:h,percentage:(h/c*100).toFixed(1)}));return{totalMembers:c,totalDomains:o,avgDomainsPerMember:d,domainStats:u,mostPopularDomain:((m=u[0])==null?void 0:m.domain)||"æš‚æ— ",leastPopularDomain:((P=u[u.length-1])==null?void 0:P.domain)||"æš‚æ— "}}),R=()=>{g.value=!0;try{const o=[["ID","å§“å","GitHubé“¾æ¥","ç ”ç©¶æ–¹å‘"].join(",")];f.value.forEach(P=>{const S=[P.id,`"${P.name}"`,`"${P.github}"`,`"${P.domain.join(";")}"`];o.push(S.join(","))});const d=o.join(`
`),u=new Blob(["\uFEFF"+d],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");if(m.download!==void 0){const P=URL.createObjectURL(u);m.setAttribute("href",P),m.setAttribute("download",`members_data_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)}}catch(c){console.error("å¯¼å‡ºå¤±è´¥:",c),alert("å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{g.value=!1}},O=()=>{g.value=!0;try{const c={exportDate:new Date().toISOString(),summary:{totalMembers:s.value.totalMembers,totalDomains:s.value.totalDomains,avgDomainsPerMember:parseFloat(s.value.avgDomainsPerMember),mostPopularDomain:s.value.mostPopularDomain,leastPopularDomain:s.value.leastPopularDomain},domainStatistics:s.value.domainStats,memberDetails:f.value.map(m=>({id:m.id,name:m.name,github:m.github,domains:m.domain,domainCount:m.domain.length}))},o=JSON.stringify(c,null,2),d=new Blob([o],{type:"application/json"}),u=document.createElement("a");if(u.download!==void 0){const m=URL.createObjectURL(d);u.setAttribute("href",m),u.setAttribute("download",`members_report_${new Date().toISOString().split("T")[0]}.json`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)}}catch(c){console.error("å¯¼å‡ºå¤±è´¥:",c),alert("å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{g.value=!1}},T=async()=>{try{const c=`
ç»„ç»‡æˆå‘˜ç»Ÿè®¡æŠ¥å‘Š
ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString()}

åŸºæœ¬ç»Ÿè®¡:
- æ€»æˆå‘˜æ•°: ${s.value.totalMembers}
- ç ”ç©¶æ–¹å‘æ•°: ${s.value.totalDomains}
- å¹³å‡æ–¹å‘æ•°/äºº: ${s.value.avgDomainsPerMember}
- æœ€çƒ­é—¨æ–¹å‘: ${s.value.mostPopularDomain}

ç ”ç©¶æ–¹å‘åˆ†å¸ƒ:
${s.value.domainStats.map(o=>`- ${o.domain}: ${o.count}äºº (${o.percentage}%)`).join(`
`)}
    `.trim();await navigator.clipboard.writeText(c),alert("ç»Ÿè®¡æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(c){console.error("å¤åˆ¶å¤±è´¥:",c),alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬")}};return(c,o)=>($(),w("div",He,[o[9]||(o[9]=e("div",{class:"export-header"},[e("h3",null,"æ•°æ®å¯¼å‡ºä¸ç»Ÿè®¡"),e("p",null,"å¯¼å‡ºæˆå‘˜æ•°æ®å’Œç»Ÿè®¡æŠ¥å‘Š")],-1)),e("div",Ve,[e("div",Je,[e("div",Ue,[e("div",Ge,b(s.value.totalMembers),1),o[0]||(o[0]=e("div",{class:"stat-label"},"æ€»æˆå‘˜æ•°",-1))]),e("div",qe,[e("div",Ke,b(s.value.totalDomains),1),o[1]||(o[1]=e("div",{class:"stat-label"},"ç ”ç©¶æ–¹å‘æ•°",-1))]),e("div",Ye,[e("div",Qe,b(s.value.avgDomainsPerMember),1),o[2]||(o[2]=e("div",{class:"stat-label"},"å¹³å‡æ–¹å‘æ•°/äºº",-1))]),e("div",Xe,[e("div",Ze,b(s.value.mostPopularDomain),1),o[3]||(o[3]=e("div",{class:"stat-label"},"æœ€çƒ­é—¨æ–¹å‘",-1))])])]),e("div",et,[o[4]||(o[4]=e("h4",null,"ç ”ç©¶æ–¹å‘è¯¦ç»†ç»Ÿè®¡",-1)),e("div",tt,[($(!0),w(Y,null,X(s.value.domainStats,d=>($(),w("div",{key:d.domain,class:"domain-item"},[e("div",ot,b(d.domain),1),e("div",at,[e("span",st,b(d.count)+" äºº",1),e("span",nt,b(d.percentage)+"%",1)]),e("div",rt,[e("div",{class:"progress-fill",style:ne({width:d.percentage+"%"})},null,4)])]))),128))])]),e("div",lt,[o[8]||(o[8]=e("h4",null,"å¯¼å‡ºé€‰é¡¹",-1)),e("div",it,[e("button",{onClick:R,disabled:g.value,class:"export-btn csv-btn"},[...o[5]||(o[5]=[e("span",{class:"btn-icon"},"ğŸ“Š",-1),B(" å¯¼å‡º CSV æ•°æ® ",-1)])],8,ct),e("button",{onClick:O,disabled:g.value,class:"export-btn json-btn"},[...o[6]||(o[6]=[e("span",{class:"btn-icon"},"ğŸ“‹",-1),B(" å¯¼å‡ºç»Ÿè®¡æŠ¥å‘Š ",-1)])],8,dt),e("button",{onClick:T,disabled:g.value,class:"export-btn copy-btn"},[...o[7]||(o[7]=[e("span",{class:"btn-icon"},"ğŸ“„",-1),B(" å¤åˆ¶ç»Ÿè®¡æ•°æ® ",-1)])],8,ut)]),g.value?($(),w("div",mt," æ­£åœ¨å¯¼å‡ºæ•°æ®... ")):G("",!0)])]))}},vt=q(ft,[["__scopeId","data-v-78bf9768"]]),pt={class:"collaboration-network"},ht={key:0,class:"status-box loading"},bt={key:1,class:"status-box error"},gt={key:2},yt={class:"stats-row"},_t={class:"stat-card"},wt={class:"stat-number"},$t={class:"stat-card"},xt={class:"stat-number"},St={class:"stat-card"},kt={class:"stat-number"},Dt={class:"filter-controls"},Ct={class:"filter-item"},zt={class:"filter-label"},Ot={class:"filter-item"},Pt=["value"],Mt={class:"chart-container"},jt={__name:"CollaborationNetwork",setup(H){const g=x([]),f=x(!0),y=x(null),l=x(!1),z=x(null),s=x(3),R=x("");let O=null,T=null,c=null;const o=Q(()=>{const k=new Set;return g.value.forEach(i=>{Array.isArray(i.domain)&&i.domain.forEach(D=>k.add(D))}),Array.from(k).sort()}),d=Q(()=>{const k=g.value.filter(t=>!((Array.isArray(t.repositories)?t.repositories:[]).length<s.value||R.value&&Array.isArray(t.domain)&&!t.domain.includes(R.value))),i={};k.forEach(t=>{t.repositories.forEach(r=>{i[r]||(i[r]=[]),i[r].push(t)})});const D=new Map;for(const[t,r]of Object.entries(i))for(let C=0;C<r.length;C++)for(let L=C+1;L<r.length;L++){const M=r[C].id,I=r[L].id,F=M<I?`${M}|${I}`:`${I}|${M}`;D.has(F)||D.set(F,{source:M<I?M:I,target:M<I?I:M,count:0,repos:[]});const n=D.get(F);n.count++,n.repos.push(t)}const A={};D.forEach(t=>{A[t.source]=(A[t.source]||0)+1,A[t.target]=(A[t.target]||0)+1});const j=k.map(t=>{const r=t.name&&t.name.trim()&&t.name!=="null"&&t.name!=="None"?t.name:t.id,C=t.repositories.length,L=t.primary_domain||(Array.isArray(t.domain)&&t.domain.length>0?t.domain[0]:"å…¶ä»–"),M=A[t.id]||0;return{id:t.id,name:r,symbolSize:Math.max(12,Math.min(55,Math.log2(C+1)*12)),category:L,value:C,degree:M,repositories:t.repositories,domains:t.domain||[],label:{show:M>=3}}}),E=Array.from(D.values()).map(t=>({source:t.source,target:t.target,value:t.count,sharedRepos:t.repos,lineStyle:{width:Math.max(1,Math.min(8,t.count*1.5)),opacity:Math.min(.8,.15+t.count*.1)}})),v=new Set(j.map(t=>t.category)),p=Array.from(v).sort().map(t=>({name:t}));return{nodes:j,edges:E,categories:p}}),u=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#13c2c2"],m=()=>{l.value=document.documentElement.classList.contains("dark")},P=()=>{const{nodes:k,edges:i,categories:D}=d.value,A=l.value?"#eee":"#333",j=l.value?"#aaa":"#666";return{backgroundColor:"transparent",title:{text:"ä»“åº“åä½œç½‘ç»œå›¾",subtext:`${k.length} ä½æˆå‘˜ Â· ${i.length} æ¡åä½œå…³ç³»
èŠ‚ç‚¹å¤§å° = å‚ä¸ä»“åº“æ•° Â· è¿çº¿ç²—ç»† = å…±åŒä»“åº“æ•°`,left:"center",top:"2%",textStyle:{fontSize:18,fontWeight:"bold",color:A},subtextStyle:{fontSize:12,color:j,lineHeight:20}},tooltip:{trigger:"item",confine:!0,formatter:E=>{if(E.dataType==="node"){const v=E.data,p=v.repositories.slice(0,6).join(", "),t=v.repositories.length>6?` ç­‰${v.repositories.length}ä¸ª`:"";return`<strong>${v.name}</strong> (${v.id})<br/>å‚ä¸ä»“åº“: ${v.value} ä¸ª<br/>åä½œè€…: ${v.degree} äºº<br/>ç ”ç©¶æ–¹å‘: ${v.domains.join(", ")||"æœªçŸ¥"}<br/>ä»“åº“: ${p}${t}`}if(E.dataType==="edge"){const v=E.data;return`<strong>${v.source}</strong> â†” <strong>${v.target}</strong><br/>å…±åŒä»“åº“: ${v.value} ä¸ª<br/>`+v.sharedRepos.join(", ")}}},legend:{data:D.map(E=>E.name),right:"3%",top:"10%",orient:"vertical",type:"scroll",pageIconColor:A,textStyle:{color:A,fontSize:11}},series:[{type:"graph",layout:"circular",data:k,links:i,categories:D.map((E,v)=>({name:E.name,itemStyle:{color:u[v%u.length]}})),roam:!0,draggable:!0,scaleLimit:{min:.5,max:3},circular:{rotateLabel:!0},label:{position:"right",formatter:"{b}",fontSize:10,color:A},lineStyle:{color:"source",curveness:.2,opacity:.3},emphasis:{focus:"adjacency",lineStyle:{width:6,opacity:.9},label:{show:!0,fontSize:13,fontWeight:"bold"}},left:"5%",right:"12%",top:"8%",bottom:"5%"}]}},S=()=>{z.value&&(O=W(z.value,l.value?"dark":"light"),O.setOption(P()))},h=()=>{O&&z.value&&(O.dispose(),O=W(z.value,l.value?"dark":"light"),O.setOption(P()))};return te(d,()=>{O&&O.setOption(P(),!0)}),K(async()=>{try{m(),typeof window<"u"&&(c=new MutationObserver(()=>{const j=document.documentElement.classList.contains("dark");j!==l.value&&(l.value=j,setTimeout(h,100))}),c.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),T=()=>O==null?void 0:O.resize(),window.addEventListener("resize",T)),await V();const i="/members-visualization/data/members.json".replace(/\/+/g,"/"),D=await fetch(i);if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const A=await D.json();g.value=A.map(j=>(Object.keys(j).forEach(E=>{let v=j[E]||"";typeof v=="string"&&(v=v.trim().replace(/^"|"$/g,"")),["domain","repositories"].includes(E)&&(v=v?v.split(";").map(p=>p.trim()).filter(p=>p):[]),j[E]=v}),j)),f.value=!1,await V(),await new Promise(j=>setTimeout(j,100)),S()}catch(k){console.error("åŠ è½½æ•°æ®å¤±è´¥:",k),y.value=k.message,f.value=!1}}),oe(()=>{O==null||O.dispose(),T&&window.removeEventListener("resize",T),c==null||c.disconnect()}),(k,i)=>($(),w("div",pt,[f.value?($(),w("div",ht,[...i[2]||(i[2]=[e("p",null,"æ­£åœ¨åŠ è½½æ•°æ®...",-1)])])):y.value?($(),w("div",bt,[e("p",null,"åŠ è½½å¤±è´¥: "+b(y.value),1)])):($(),w("div",gt,[e("div",yt,[e("div",_t,[e("div",wt,b(d.value.nodes.length),1),i[3]||(i[3]=e("div",{class:"stat-label"},"åä½œæˆå‘˜",-1))]),e("div",$t,[e("div",xt,b(d.value.edges.length),1),i[4]||(i[4]=e("div",{class:"stat-label"},"åä½œå…³ç³»",-1))]),e("div",St,[e("div",kt,b(d.value.categories.length),1),i[5]||(i[5]=e("div",{class:"stat-label"},"ç ”ç©¶æ–¹å‘",-1))])]),e("div",Dt,[e("div",Ct,[e("label",zt,[i[6]||(i[6]=B("æœ€å°‘å‚ä¸ä»“åº“æ•°: ",-1)),e("strong",null,b(s.value),1)]),ee(e("input",{type:"range","onUpdate:modelValue":i[0]||(i[0]=D=>s.value=D),min:"1",max:"10",step:"1",class:"range-slider"},null,512),[[re,s.value,void 0,{number:!0}]]),i[7]||(i[7]=e("div",{class:"range-ticks"},[e("span",null,"1"),e("span",null,"5"),e("span",null,"10")],-1))]),e("div",Ot,[i[9]||(i[9]=e("label",{class:"filter-label"},"ç ”ç©¶æ–¹å‘",-1)),ee(e("select",{"onUpdate:modelValue":i[1]||(i[1]=D=>R.value=D),class:"domain-select"},[i[8]||(i[8]=e("option",{value:""},"å…¨éƒ¨",-1)),($(!0),w(Y,null,X(o.value,D=>($(),w("option",{key:D,value:D},b(D),9,Pt))),128))],512),[[le,R.value]])])]),e("div",Mt,[e("div",{ref_key:"chartRef",ref:z,class:"chart"},null,512)])]))]))}},Et=q(jt,[["__scopeId","data-v-9656cfbd"]]),Nt=JSON.parse('{"title":"ğŸ“š æˆå‘˜ä¸åä½œåˆ†æ","description":"","frontmatter":{},"headers":[],"relativePath":"organization.md","filePath":"organization.md","lastUpdated":1771164395000}'),Lt={name:"organization.md"},Rt=Object.assign(Lt,{setup(H){const g=x("åŠ è½½ä¸­..."),f=x("åŠ è½½ä¸­...");return K(async()=>{try{const y=await fetch("/members-visualization/data/datawhalechina/fetch_time_key.json");if(y.ok){const l=await y.json();g.value=l[l.length-4],f.value=l[l.length-1]}}catch(y){console.error("è·å–æ—¶é—´æ•°æ®å¤±è´¥:",y)}}),(y,l)=>($(),w("div",null,[l[0]||(l[0]=e("h1",{id:"ğŸ“š-æˆå‘˜ä¸åä½œåˆ†æ",tabindex:"-1"},[B("ğŸ“š æˆå‘˜ä¸åä½œåˆ†æ "),e("a",{class:"header-anchor",href:"#ğŸ“š-æˆå‘˜ä¸åä½œåˆ†æ","aria-label":'Permalink to "ğŸ“š æˆå‘˜ä¸åä½œåˆ†æ"'},"â€‹")],-1)),l[1]||(l[1]=e("h2",{id:"åŒç±»ç»„ç»‡å¯¹æ¯”",tabindex:"-1"},[B("åŒç±»ç»„ç»‡å¯¹æ¯” "),e("a",{class:"header-anchor",href:"#åŒç±»ç»„ç»‡å¯¹æ¯”","aria-label":'Permalink to "åŒç±»ç»„ç»‡å¯¹æ¯”"'},"â€‹")],-1)),e("p",null,"GitHub ä¸Š Star æ•°æ’åå‰åçš„çŸ¥è¯†åˆ†äº«ç±»ç»„ç»‡åœ¨ "+b(g.value)+" è‡³ "+b(f.value)+" ç»Ÿè®¡å‘¨æœŸå†…çš„å˜åŒ–æƒ…å†µï¼š",1),U($e),l[2]||(l[2]=e("h2",{id:"ç ”ç©¶æ–¹å‘åˆ†å¸ƒ",tabindex:"-1"},[B("ç ”ç©¶æ–¹å‘åˆ†å¸ƒ "),e("a",{class:"header-anchor",href:"#ç ”ç©¶æ–¹å‘åˆ†å¸ƒ","aria-label":'Permalink to "ç ”ç©¶æ–¹å‘åˆ†å¸ƒ"'},"â€‹")],-1)),U(Fe),l[3]||(l[3]=e("h2",{id:"ä»“åº“åä½œç½‘ç»œ",tabindex:"-1"},[B("ä»“åº“åä½œç½‘ç»œ "),e("a",{class:"header-anchor",href:"#ä»“åº“åä½œç½‘ç»œ","aria-label":'Permalink to "ä»“åº“åä½œç½‘ç»œ"'},"â€‹")],-1)),l[4]||(l[4]=e("p",null,"é€šè¿‡å…±åŒå‚ä¸çš„ä»“åº“ï¼Œå±•ç¤ºæˆå‘˜ä¹‹é—´çš„åä½œå…³ç³»ã€‚ä¸¤ä½æˆå‘˜å‚ä¸äº†åŒä¸€ä¸ªä»“åº“ï¼Œå³è§†ä¸ºå­˜åœ¨åä½œå…³ç³»ã€‚",-1)),U(Et),l[5]||(l[5]=e("h2",{id:"æ•°æ®å¯¼å‡º",tabindex:"-1"},[B("æ•°æ®å¯¼å‡º "),e("a",{class:"header-anchor",href:"#æ•°æ®å¯¼å‡º","aria-label":'Permalink to "æ•°æ®å¯¼å‡º"'},"â€‹")],-1)),U(vt)]))}});export{Nt as __pageData,Rt as default};
