import{_ as L,h as M,c as i,o as n,j as e,t as r,e as w,n as N,F as T,B as V,N as U,p as S,b as G,a as B,q as K,P as I,v as Z,ag as W,ah as Y,ak as et,G as J,g as st,ai as at}from"./chunks/framework.BOb-TpcB.js";const ot={class:"rank-badge"},nt={key:0,class:"medal"},lt={key:1,class:"rank-number"},it={class:"avatar-section"},rt=["src","alt"],ct={key:1,class:"leaderboard-indicator"},dt={class:"member-info"},ut={class:"name-section"},mt={class:"member-name"},ht={class:"member-meta"},vt={key:0,class:"location"},gt={key:1,class:"company"},pt={key:0,class:"domains-section"},bt={class:"domains"},yt={class:"score-section"},_t={class:"score-value"},ft={class:"score-label"},$t={class:"detailed-stats"},kt={key:0,class:"stat-item",title:"Followers"},wt={class:"stat-value"},Dt={key:1,class:"stat-item",title:"ç»„ç»‡ä»“åº“æ€»Stars"},Ct={class:"stat-value"},St={key:2,class:"stat-item",title:"å‚ä¸ç»„ç»‡ä»“åº“æ•°"},xt={class:"stat-value"},Mt={class:"actions-section"},Ot=["href","title"],Nt={__name:"LeaderboardItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},colorScheme:{type:String,default:"blue"},showTrend:{type:Boolean,default:!1},icon:{type:String,default:""},animationDelay:{type:Number,default:0}},setup(o){const m=o,h=M(()=>{const g=m.member.name;return g&&g!=="null"&&g!=="undefined"&&g!=="None"&&g.trim()!==""?g:m.member.id||"æœªçŸ¥ç”¨æˆ·"}),c=g=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[g]||g,f=g=>{const b="/members-visualization/",x=`${b}default-avatar.svg`.replace(/\/+/g,"/");return g?g.startsWith("avatars/")?`${b}${g}`.replace(/\/+/g,"/"):g.startsWith("http")?g:`${b}${g}`.replace(/\/+/g,"/"):x},D=g=>{const b="/members-visualization/";g.target.src=`${b}default-avatar.svg`.replace(/\/+/g,"/")},$=g=>g?g.split(";").map(b=>b.trim()).filter(b=>b):[],v=()=>{const g=["up","down","stable"];return g[Math.floor(Math.random()*g.length)]},C=()=>{const g=v();return{up:"ğŸ“ˆ",down:"ğŸ“‰",stable:"â¡ï¸"}[g]||"â¡ï¸"};return(g,b)=>(n(),i("div",{class:N(["leaderboard-item leaderboard-item-base",[`rank-${o.rank}`,`theme-${o.colorScheme}`]]),style:U({animationDelay:`${o.animationDelay}ms`})},[e("div",ot,[o.rank<=3?(n(),i("span",nt,r(c(o.rank)),1)):(n(),i("span",lt,r(o.rank),1))]),e("div",it,[e("img",{src:f(o.member.avatar),alt:h.value,class:"avatar",onError:D},null,40,rt),o.showTrend?(n(),i("div",{key:0,class:N(["trend-indicator",v()])},r(C()),3)):o.icon?(n(),i("div",ct,r(o.icon),1)):w("",!0)]),e("div",dt,[e("div",ut,[e("h4",mt,r(h.value),1),e("div",ht,[o.member.location?(n(),i("span",vt,"ğŸ“ "+r(o.member.location),1)):w("",!0),o.member.company?(n(),i("span",gt,"ğŸ¢ "+r(o.member.company),1)):w("",!0)])]),o.member.domain?(n(),i("div",pt,[e("div",bt,[(n(!0),i(T,null,V($(o.member.domain),x=>(n(),i("span",{key:x,class:"domain-tag"},r(x),1))),128))])])):w("",!0)]),e("div",yt,[e("div",_t,r(Math.round(o.member.score||0)),1),e("div",ft,r(o.member.scoreDisplay||"åˆ†æ•°"),1),e("div",$t,[o.member.followers?(n(),i("div",kt,[b[0]||(b[0]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",wt,r(o.member.followers),1)])):w("",!0),o.member.org_total_stars?(n(),i("div",Dt,[b[1]||(b[1]=e("span",{class:"stat-icon"},"â­",-1)),e("span",Ct,r(o.member.org_total_stars),1)])):w("",!0),o.member.org_repos_count?(n(),i("div",St,[b[2]||(b[2]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",xt,r(o.member.org_repos_count),1)])):w("",!0)])]),e("div",Mt,[e("a",{href:o.member.github,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:`è®¿é—® ${h.value} çš„ GitHub`},[...b[3]||(b[3]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Ot)])],6))}},Tt=L(Nt,[["__scopeId","data-v-e0b0a065"]]),Vt={class:"card-header card-header-base"},zt={class:"title-section title-section-base"},Ht={class:"icon icon-base"},Pt={class:"title title-base"},jt={class:"description description-base"},Et={class:"stats-badge"},Rt={class:"count"},At={class:"leaderboard-content"},Bt={key:0,class:"empty-state"},Lt={key:1,class:"members-list"},Ft={class:"card-footer"},Ut={class:"ranking-info"},qt={key:0},Gt={key:1},Wt={__name:"LeaderboardCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"ğŸ†"},members:{type:Array,default:()=>[]},colorScheme:{type:String,default:"blue",validator:o=>["fire","blue","green","purple","gold"].includes(o)},showTrend:{type:Boolean,default:!1}},setup(o){const m=o,h=S(!1),c=M(()=>h.value?m.members:m.members.slice(0,5)),f=()=>{h.value=!h.value};return(D,$)=>{var v,C,g;return n(),i("div",{class:N(["leaderboard-card leaderboard-card-base",`theme-${o.colorScheme}`])},[e("div",Vt,[e("div",zt,[e("span",Ht,r(o.icon),1),e("div",null,[e("h3",Pt,r(o.title),1),e("p",jt,r(o.description),1)])]),e("div",Et,[e("span",Rt,r(o.members.length),1),$[0]||($[0]=e("span",{class:"label"},"äººä¸Šæ¦œ",-1))])]),e("div",At,[o.members.length===0?(n(),i("div",Bt,[...$[1]||($[1]=[e("p",null,"æš‚æ— ç¬¦åˆæ¡ä»¶çš„æˆå‘˜",-1)])])):(n(),i("div",Lt,[(n(!0),i(T,null,V(c.value,(b,x)=>(n(),G(Tt,{key:b.id,member:b,rank:b.rank,"color-scheme":o.colorScheme,"show-trend":o.showTrend,icon:o.icon,"animation-delay":x*100},null,8,["member","rank","color-scheme","show-trend","icon","animation-delay"]))),128))]))]),e("div",Ft,[e("div",Ut,[o.members.length>0?(n(),i("span",qt," å† å†›ï¼š"+r(((v=o.members[0])==null?void 0:v.name)||((C=o.members[0])==null?void 0:C.id)),1)):w("",!0),o.members.length>1?(n(),i("span",Gt," æœ€é«˜åˆ†ï¼š"+r(Math.round(((g=o.members[0])==null?void 0:g.score)||0)),1)):w("",!0)]),o.members.length>5?(n(),i("button",{key:0,onClick:f,class:"expand-btn"},[B(r(h.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:N(["arrow",{expanded:h.value}])},"â–¼",2)])):w("",!0)])],2)}}},Jt=L(Wt,[["__scopeId","data-v-6e65b0db"]]),Zt={class:"rank-badge"},Qt={key:0,class:"medal"},Yt={key:1,class:"rank-number"},Xt={class:"avatar-section"},Kt=["src","alt"],It={class:"member-info"},te={class:"name-section"},ee={class:"member-name"},se={class:"member-meta"},ae={key:0,class:"location"},oe={key:1,class:"company"},ne={key:0,class:"domains-section"},le={class:"domains"},ie={class:"daily-chart-section"},re={class:"daily-chart"},ce=["title"],de={key:0,class:"bar-fill"},ue={class:"score-section"},me={class:"score-value"},he={class:"score-label"},ve={class:"detailed-stats"},ge={key:0,class:"stat-item"},pe={class:"stat-value"},be={key:1,class:"stat-item"},ye={class:"stat-value"},_e={key:2,class:"stat-item"},fe={class:"stat-value"},$e={class:"popup-header"},ke={class:"popup-content"},we={class:"top-sections"},De={class:"detail-section stats-section"},Ce={key:0,class:"detail-section repos-section"},Se={class:"repo-tags"},xe=["href","title"],Me={key:0,class:"detail-section"},Oe={class:"commit-messages"},Ne=["href","title"],Te={class:"commit-text"},Ve={class:"commit-meta"},ze={class:"repo-link"},He={class:"actions-section"},Pe=["href"],je={__name:"WeeklyCommitItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(o,{emit:m}){const h=a=>a?a.split(";").map(t=>t.trim()).filter(Boolean):[],c=o,f=a=>{a.target.closest&&(a.target.closest(".github-link")||a.target.closest(".details-popup"))||D("toggle-details",c.member.user_key)},D=m,$=S(null),v=S(null),C=S("bottom"),g=async()=>{if(!c.showDetails||(await I(),!v.value))return;const a=v.value.closest(".leaderboard-content")||v.value.closest(".commits-list")||v.value.closest(".weekly-commits-card");if(!a){C.value="bottom";return}const t=a.querySelectorAll(".weekly-commit-item"),s=Array.from(t).indexOf(v.value),u=t.length;if(s>=u-2){C.value="top";return}const y=v.value.getBoundingClientRect(),p=a.getBoundingClientRect(),z=320,j=20,A=p.bottom-y.bottom,F=y.top-p.top;A<z+j&&F>z+j?C.value="top":C.value="bottom"};K(()=>c.showDetails,a=>{a&&g()});const b=M(()=>{const a=c.member.name;return a&&a!=="null"&&a!=="undefined"&&a!=="None"&&a.trim()!==""?a:c.member.id?c.member.id:c.member.display_name||c.member.user_key||"æœªçŸ¥ç”¨æˆ·"}),x=a=>{const t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0");return`${t}-${s}-${u}`},O=M(()=>{const a=c.member.daily_commits?Object.keys(c.member.daily_commits):[];let t=new Date;if(a.length){const u=a.map(y=>new Date(y)).filter(y=>!isNaN(y));u.length&&(t=u.sort((y,p)=>y-p)[u.length-1])}const s=[];for(let u=6;u>=0;u--){const y=new Date(t);y.setDate(y.getDate()-u),s.push(x(y))}return s}),P=M(()=>{const a=c.member.daily_commits||{};return O.value.map(t=>{const s=Object.prototype.hasOwnProperty.call(a,t),u=s&&a[t]||0;return{date:t,count:u,hasData:s}})}),E=M(()=>{const a=[],t=c.member.total_commits,s=c.member.repo_count,u=c.member.active_days;return typeof t=="number"&&a.push(`${t} æ¬¡`),typeof s=="number"&&a.push(`${s} ä»“åº“`),typeof u=="number"&&a.push(`${u} å¤©`),a.join(" â€¢ ")}),H=a=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[a]||a,R=a=>{const t="/members-visualization/",s=`${t}default-avatar.svg`.replace(/\/+/g,"/");return a?a.startsWith("avatars/")?`${t}${a}`.replace(/\/+/g,"/"):a.startsWith("http")?a:`${t}${a}`.replace(/\/+/g,"/"):s},d=a=>{const t="/members-visualization/";a.target.src=`${t}default-avatar.svg`.replace(/\/+/g,"/")},l=a=>{const t=P.value.filter(u=>u.hasData).map(u=>u.count),s=t.length?Math.max(...t):0;return s>0?a/s*100:0},_=()=>{const a=c.member.avg_commits_per_day||0,t=c.member.active_days||0;return a>=3&&t>=5?"up":a>=2&&t>=3?"stable":"down"},k=()=>{const a=_();return{up:"ğŸ“ˆ",stable:"â¡ï¸",down:"ğŸ“‰"}[a]||"â¡ï¸"};return(a,t)=>{var s,u,y;return n(),i("div",{ref_key:"itemRef",ref:v,class:N(["weekly-commit-item leaderboard-item-base",[`rank-${o.rank}`,{"is-expanded":c.showDetails}]]),style:U({animationDelay:`${o.animationDelay}ms`}),onClick:f},[e("div",Zt,[o.rank<=3?(n(),i("span",Qt,r(H(o.rank)),1)):(n(),i("span",Yt,r(o.rank),1))]),e("div",Xt,[e("img",{src:R(o.member.avatar),alt:b.value,class:"avatar",onError:d},null,40,Kt),t[1]||(t[1]=e("div",{class:"fire-indicator"},"ğŸ”¥",-1))]),e("div",It,[e("div",te,[e("h4",ee,r(b.value),1),e("div",se,[o.member.location?(n(),i("span",ae,"ğŸ“ "+r(o.member.location),1)):w("",!0),o.member.company?(n(),i("span",oe,"ğŸ¢ "+r(o.member.company),1)):w("",!0)])]),o.member.domain?(n(),i("div",ne,[e("div",le,[(n(!0),i(T,null,V(h(o.member.domain),p=>(n(),i("span",{key:p,class:"domain-tag"},r(p),1))),128))])])):w("",!0)]),e("div",ie,[t[2]||(t[2]=e("div",{class:"chart-title"},"æ¯æ—¥åˆ†å¸ƒ",-1)),e("div",re,[(n(!0),i(T,null,V(P.value,p=>(n(),i("div",{key:p.date,class:N(p.hasData?"day-bar":"day-dash"),style:U(p.hasData?{height:`${l(p.count)}%`}:{}),title:p.hasData?`${p.date}: ${p.count} commits`:`${p.date}: æ— æ•°æ®`},[p.hasData?(n(),i("div",de)):w("",!0)],14,ce))),128))])]),e("div",ue,[e("div",me,r(o.member.score),1),e("div",he,r(E.value),1),e("div",ve,[o.member.followers?(n(),i("div",ge,[t[3]||(t[3]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",pe,r(o.member.followers),1)])):w("",!0),o.member.total_stars?(n(),i("div",be,[t[4]||(t[4]=e("span",{class:"stat-icon"},"â­",-1)),e("span",ye,r(o.member.total_stars),1)])):w("",!0),o.member.public_repos?(n(),i("div",_e,[t[5]||(t[5]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",fe,r(o.member.public_repos),1)])):w("",!0)]),e("div",{class:N(["trend-indicator",_()])},r(k()),3)]),c.showDetails?(n(),i("div",{key:0,ref_key:"popupRef",ref:$,class:N(["details-popup",`popup-${C.value}`])},[e("div",$e,[e("h5",null,r(b.value)+" çš„æœ¬å‘¨æˆ˜ç»©",1),e("button",{onClick:t[0]||(t[0]=p=>D("toggle-details",c.member.user_key)),class:"close-btn"},"Ã—")]),e("div",ke,[e("div",we,[e("div",De,[t[6]||(t[6]=e("h6",null,"ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ",-1)),e("ul",null,[e("li",null,"æ€»commitæ•°ï¼š"+r(o.member.total_commits),1),e("li",null,"å‚ä¸ä»“åº“ï¼š"+r(o.member.repo_count)+" ä¸ª",1),e("li",null,"æ´»è·ƒå¤©æ•°ï¼š"+r(o.member.active_days)+" å¤©",1),e("li",null,"å¹³å‡æ¯æ—¥ï¼š"+r((s=o.member.avg_commits_per_day)==null?void 0:s.toFixed(1))+" commits",1)])]),(u=o.member.repos)!=null&&u.length?(n(),i("div",Ce,[t[8]||(t[8]=e("h6",null,"ğŸ“ ä¸»è¦ä»“åº“",-1)),e("div",Se,[(n(!0),i(T,null,V(o.member.repos.slice(0,5),p=>(n(),i("a",{key:p,href:`https://github.com/datawhalechina/${p}`,target:"_blank",rel:"noopener noreferrer",class:"repo-tag repo-link-tag",title:`è®¿é—®ä»“åº“: ${p}`},[B(r(p)+" ",1),t[7]||(t[7]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"10",height:"10"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))],8,xe))),128))])])):w("",!0)]),(y=o.member.commit_messages)!=null&&y.length?(n(),i("div",Me,[t[10]||(t[10]=e("h6",null,"ğŸ’¬ æœ€è¿‘æäº¤",-1)),e("div",Oe,[(n(!0),i(T,null,V(o.member.commit_messages.slice(0,3),p=>(n(),i("div",{key:p.url,class:"commit-message"},[e("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`æŸ¥çœ‹æäº¤è¯¦æƒ…: ${p.message}`},[e("div",Te,r(p.message),1),e("div",Ve,[e("span",ze,r(p.repo),1),B(" â€¢ "+r(p.date)+" ",1),t[9]||(t[9]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Ne)]))),128))])])):w("",!0)])],2)):w("",!0),e("div",He,[o.member.github_username?(n(),i("a",{key:0,href:`https://github.com/${o.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"è®¿é—®GitHub"},[...t[11]||(t[11]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Pe)):w("",!0)]),t[12]||(t[12]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6)}}},Ee=L(je,[["__scopeId","data-v-1543a12a"]]);function Re(o){let m=o;m.charCodeAt(0)===65279&&(m=m.slice(1));const h=m.trim().split(`
`);if(h.length<2)return[];const c=h[0].split(",").map(D=>D.trim().replace(/^["']|["']$/g,"").replace(/^\uFEFF/,"")),f=[];for(let D=1;D<h.length;D++){const $=h[D].trim();if(!$)continue;const v=[];let C="",g=!1;for(let x=0;x<$.length;x++){const O=$[x];O==='"'?g=!g:O===","&&!g?(v.push(C.trim()),C=""):C+=O}v.push(C.trim());const b={};c.forEach((x,O)=>{b[x]=v[O]||""}),f.push(b)}return f}function tt(o){const m=new Set;return o.forEach((h,c)=>{if(h.id&&h.id.trim()){const f=h.id.trim();m.add(f),c<5&&console.log(`  - Extracted username: ${f}`)}}),m}async function X(o="/data/datawhale_member.csv"){try{console.log(`Loading organization members from: ${o}`);const m=await fetch(o);if(!m.ok)throw new Error(`Failed to fetch CSV: ${m.status}`);const h=await m.text(),c=Re(h),f=tt(c);return console.log(`Loaded ${f.size} organization members from CSV`),f}catch(m){return console.error("Error loading organization members:",m),new Set}}async function Ae(o="/data/datawhale_member.json"){try{console.log(`Loading organization members from: ${o}`);const m=await fetch(o);if(!m.ok){console.warn("JSON file not found, trying CSV file instead");const f=o.replace(".json",".csv");return await X(f)}const h=await m.json(),c=tt(h);return console.log(`Loaded ${c.size} organization members from JSON`),c}catch(m){console.error("Error loading organization members from JSON:",m);try{const h=o.replace(".json",".csv");return console.log(`Falling back to CSV file: ${h}`),await X(h)}catch(h){return console.error("Error loading organization members from CSV:",h),new Set}}}function Q(o,m){return!o||!m?!1:m.has(o)}const Be={class:"card-header card-header-base"},Le={class:"stats-badge"},Fe={class:"count"},Ue={class:"update-info-section"},qe={class:"time-info"},Ge={class:"update-time"},We={class:"leaderboard-content"},Je={key:0,class:"loading-state"},Ze={key:1,class:"error-state"},Qe={key:2,class:"empty-state"},Ye={key:0},Xe={key:1},Ke={key:2,class:"empty-hint"},Ie={key:3,class:"empty-hint"},ts={key:3,class:"commits-list"},es={key:0,class:"card-footer"},ss={class:"ranking-info"},as={__name:"WeeklyCommitsCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(o){const m=o,h=S(!0),c=S(null),f=S(null),D=S(!1),$=S(null),v=M(()=>{var k;if(!((k=f.value)!=null&&k.user_commits))return[];const d=[];let l=0;for(const[a,t]of Object.entries(f.value.user_commits))if(t.total_commits>=1){const s=m.membersData.find(y=>y.id===a);if(m.showOnlyOrgMembers){const y=!!s,p=Q(a,m.organizationMembers);if(l<3&&(console.log(`ğŸ”¥ ä¸€å‘¨å·ç‹æ¦œ - æ£€æŸ¥ç”¨æˆ· ${a}:`,{hasMemberInfo:y,isOrgMember:p,hasAvatar:s==null?void 0:s.avatar,passed:y&&p}),l++),!s||!p)continue}const u={user_key:a,id:(s==null?void 0:s.id)||a,name:(s==null?void 0:s.name)||null,display_name:x(a,s),github_username:O(a),avatar:(s==null?void 0:s.avatar)||null,location:(s==null?void 0:s.location)||null,company:(s==null?void 0:s.company)||null,domain:(s==null?void 0:s.domain)||"",followers:(s==null?void 0:s.followers)??(s==null?void 0:s.followers_count)??0,total_stars:(s==null?void 0:s.total_stars)??(s==null?void 0:s.stars)??0,public_repos:(s==null?void 0:s.public_repos)??(s==null?void 0:s.repo_count)??0,...t,score:P(t)};m.selectedDomain?s&&s.domain&&s.domain.includes(m.selectedDomain)&&d.push(u):d.push(u)}return d.sort((a,t)=>t.score-a.score).slice(0,m.topCount)}),C=M(()=>D.value?v.value:v.value.slice(0,5)),g=M(()=>v.value.reduce((d,l)=>d+l.total_commits,0)),b=M(()=>{var l;return(l=f.value)!=null&&l.update_time?new Date(f.value.update_time).toLocaleString("zh-CN"):"æœªçŸ¥"}),x=(d,l)=>{if(l!=null&&l.name&&l.name!=="null"&&l.name!=="undefined"&&l.name!=="None"&&l.name.trim()!=="")return l.name;if(l!=null&&l.id)return l.id;if(!d.includes("@"))return d;const _=d.match(/^([^@]+)@/);return _?_[1]:d},O=d=>d.includes("@")?null:d,P=d=>{let l=0;l+=d.total_commits;const _=d.active_days||0;_>=7?l+=10:_>=5?l+=5:_>=3&&(l+=2);const k=d.repo_count||0;k>=5?l+=5:k>=3?l+=3:k>=2&&(l+=1);const a=d.avg_commits_per_day||0;return a>=5?l+=8:a>=3?l+=5:a>=2&&(l+=2),Math.round(l)},E=d=>{$.value===d?$.value=null:$.value=d},H=async()=>{try{h.value=!0,c.value=null;const l="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),_=await fetch(l);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);f.value=await _.json()}catch(d){c.value=d.message,console.error("åŠ è½½commitæ•°æ®å¤±è´¥:",d)}finally{h.value=!1}},R=()=>{D.value=!D.value};return Z(()=>{H()}),(d,l)=>{var _;return n(),i("div",{class:N(["weekly-commits-card leaderboard-card-base","theme-fire"])},[e("div",Be,[l[1]||(l[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-fire"},"ğŸ”¥"),e("div",null,[e("h3",{class:"title title-base"},"ä¸€å‘¨å·ç‹æ¦œ"),e("p",{class:"description description-base"},"åŸºäºæœ€è¿‘7å¤©commitæ´»åŠ¨çš„è¶…çº§å·ç‹æ’è¡Œ")])],-1)),e("div",Le,[e("span",Fe,r(v.value.length),1),l[0]||(l[0]=e("span",{class:"label"},"å¤§å·ç‹",-1))])]),e("div",Ue,[e("div",qe,[l[2]||(l[2]=e("span",{class:"time-label"},"ğŸ“… æœ€è¿‘7å¤©æ´»è·ƒæ•°æ®",-1)),e("span",Ge,r(b.value),1)])]),e("div",We,[h.value?(n(),i("div",Je,[...l[3]||(l[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½commitæ•°æ®...",-1)])])):c.value?(n(),i("div",Ze,[e("p",null,"âŒ "+r(c.value),1),e("button",{onClick:H,class:"retry-btn"},"é‡è¯•")])):v.value.length===0?(n(),i("div",Qe,[l[4]||(l[4]=e("div",{class:"empty-icon"},"ğŸ˜´",-1)),o.showOnlyOrgMembers?(n(),i("p",Ye,"ç»„ç»‡æˆå‘˜æœ¬å‘¨æš‚æ— commitæ´»åŠ¨")):(n(),i("p",Xe,"æœ¬å‘¨æš‚æ— commitæ´»åŠ¨")),o.showOnlyOrgMembers?(n(),i("p",Ke,"ç»„ç»‡æˆå‘˜ä»¬å¿«å»å†™ä»£ç å§ï¼")):(n(),i("p",Ie,"å¿«å»å†™ä»£ç å§ï¼"))])):(n(),i("div",ts,[(n(!0),i(T,null,V(C.value,(k,a)=>(n(),G(Ee,{key:k.user_key,member:k,rank:a+1,"animation-delay":a*100,"show-details":$.value===k.user_key,onToggleDetails:E},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),v.value.length>0?(n(),i("div",es,[e("div",ss,[e("span",null,"ğŸ† æœ¬å‘¨å·ç‹ï¼š"+r((_=v.value[0])==null?void 0:_.display_name),1),e("span",null,"ğŸ“Š æ€»commitæ•°ï¼š"+r(g.value),1)]),v.value.length>5?(n(),i("button",{key:0,onClick:R,class:"expand-btn"},[B(r(D.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:N(["arrow",{expanded:D.value}])},"â–¼",2)])):w("",!0)])):w("",!0)])}}},os=L(as,[["__scopeId","data-v-3fbcb021"]]),ns={class:"rank-badge"},ls={key:0,class:"medal"},is={key:1,class:"rank-number"},rs={class:"avatar-section"},cs=["src","alt"],ds={class:"member-info"},us={class:"name-section"},ms={class:"member-name"},hs={class:"member-meta"},vs={key:0,class:"location"},gs={key:1,class:"company"},ps={key:0,class:"domains-section"},bs={class:"domains"},ys={class:"night-chart-section"},_s={class:"night-chart"},fs=["title"],$s={class:"score-section"},ks={class:"score-value night-score"},ws={class:"score-label"},Ds={class:"detailed-stats"},Cs={key:0,class:"stat-item"},Ss={class:"stat-value"},xs={key:1,class:"stat-item"},Ms={class:"stat-value"},Os={key:2,class:"stat-item"},Ns={class:"stat-value"},Ts={class:"actions-section"},Vs=["href"],zs={class:"popup-header"},Hs={class:"popup-content"},Ps={class:"top-sections"},js={class:"detail-section stats-section"},Es={class:"detail-section analysis-section"},Rs={class:"night-hours-detail"},As={class:"hour-label"},Bs={class:"hour-count"},Ls={key:0,class:"detail-section"},Fs={class:"commit-messages"},Us=["href","title"],qs={class:"commit-text"},Gs={class:"commit-meta"},Ws={class:"repo-link"},Js={class:"night-time"},Zs={__name:"NightOwlItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(o,{emit:m}){const h=a=>a?a.split(";").map(t=>t.trim()).filter(Boolean):[],c=o,f=m,D=a=>{a.target.closest&&(a.target.closest(".github-link")||a.target.closest(".details-popup"))||f("toggle-details",c.member.user_key)},$=S(null),v=S(null),C=S("bottom"),g=[22,23,0,1,2,3,4,5],b=M(()=>{const a=c.member.name;return a&&a!=="null"&&a!=="undefined"&&a!=="None"&&a.trim()!==""?a:c.member.id?c.member.id:c.member.display_name||c.member.user_key||"æœªçŸ¥ç”¨æˆ·"}),x=M(()=>(c.member.commit_messages||[]).filter(a=>a.is_night_owl)),O=M(()=>{const a=[],t=c.member.night_owl_commits,s=c.member.night_owl_percentage;return typeof t=="number"&&a.push(`${t} æ·±å¤œ`),typeof s=="number"&&a.push(`${s}%`),a.join(" â€¢ ")}),P=a=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[a]||a,E=a=>{if(!a)return"/default-avatar.png";const t="/members-visualization/";return a.startsWith("http")?a:`${t}${a}`.replace(/\/+/g,"/")},H=a=>{a.target.src="/default-avatar.png"},R=a=>{const t=c.member.beijing_hourly_distribution[a]||0,s=Math.max(...g.map(u=>c.member.beijing_hourly_distribution[u]||0));return s>0?t/s*100:0},d=()=>{const a=c.member.night_owl_percentage||0;return a>=50?"trend-hot":a>=30?"trend-warm":"trend-cool"},l=()=>{const a=c.member.night_owl_percentage||0;return a>=50?"â†—":a>=30?"â†’":"â†˜"},_=a=>`${a.toString().padStart(2,"0")}:00`,k=async()=>{if(!(!c.showDetails||!v.value)){await I();try{const a=v.value.closest(".commits-list");if(!a){C.value="bottom";return}const t=a.querySelectorAll(".night-owl-item"),s=Array.from(t).indexOf(v.value),u=t.length;if(s>=u-2){C.value="top";return}const y=v.value.getBoundingClientRect(),p=a.getBoundingClientRect(),z=320,j=20,A=p.bottom-y.bottom,F=y.top-p.top;A<z+j&&F>z+j?C.value="top":C.value="bottom"}catch(a){console.warn("å¼¹çª—å®šä½è®¡ç®—å¤±è´¥:",a),C.value="bottom"}}};return K(()=>c.showDetails,a=>{a&&k()},{immediate:!0}),(a,t)=>(n(),i("div",{ref_key:"itemRef",ref:v,class:N(["night-owl-item leaderboard-item-base",[`rank-${o.rank}`,{"is-expanded":c.showDetails}]]),style:U({animationDelay:`${o.animationDelay}ms`}),onClick:D},[e("div",ns,[o.rank<=3?(n(),i("span",ls,r(P(o.rank)),1)):(n(),i("span",is,r(o.rank),1))]),e("div",rs,[e("img",{src:E(o.member.avatar),alt:b.value,class:"avatar",onError:H},null,40,cs),t[1]||(t[1]=e("div",{class:"moon-indicator"},"ğŸŒ™",-1))]),e("div",ds,[e("div",us,[e("h4",ms,r(b.value),1),e("div",hs,[o.member.location?(n(),i("span",vs,"ğŸ“ "+r(o.member.location),1)):w("",!0),o.member.company?(n(),i("span",gs,"ğŸ¢ "+r(o.member.company),1)):w("",!0)])]),o.member.domain?(n(),i("div",ps,[e("div",bs,[(n(!0),i(T,null,V(h(o.member.domain),s=>(n(),i("span",{key:s,class:"domain-tag"},r(s),1))),128))])])):w("",!0)]),e("div",ys,[t[3]||(t[3]=e("div",{class:"chart-title"},"æ·±å¤œåˆ†å¸ƒ",-1)),e("div",_s,[(n(),i(T,null,V(g,s=>e("div",{key:s,class:"hour-bar",style:U({height:`${R(s)}%`}),title:`${s}:00 - ${o.member.beijing_hourly_distribution[s]||0} commits`},[...t[2]||(t[2]=[e("div",{class:"bar-fill night-bar-fill"},null,-1)])],12,fs)),64))])]),e("div",$s,[e("div",ks,r(o.member.night_owl_score),1),e("div",ws,r(O.value),1),e("div",Ds,[o.member.followers?(n(),i("div",Cs,[t[4]||(t[4]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",Ss,r(o.member.followers),1)])):w("",!0),o.member.total_stars?(n(),i("div",xs,[t[5]||(t[5]=e("span",{class:"stat-icon"},"â­",-1)),e("span",Ms,r(o.member.total_stars),1)])):w("",!0),o.member.public_repos?(n(),i("div",Os,[t[6]||(t[6]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",Ns,r(o.member.public_repos),1)])):w("",!0)]),e("div",{class:N(["trend-indicator night-trend",d()])},r(l()),3)]),e("div",Ts,[o.member.github_username?(n(),i("a",{key:0,href:`https://github.com/${o.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"è®¿é—®GitHub"},[...t[7]||(t[7]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Vs)):w("",!0)]),c.showDetails?(n(),i("div",{key:0,ref_key:"popupRef",ref:$,class:N(["details-popup night-popup",`popup-${C.value}`])},[e("div",zs,[e("h5",null,r(b.value)+" çš„æ·±å¤œæˆ˜ç»©",1),e("button",{onClick:t[0]||(t[0]=s=>f("toggle-details",c.member.user_key)),class:"close-btn"},"Ã—")]),e("div",Hs,[e("div",Ps,[e("div",js,[t[8]||(t[8]=e("h6",null,"ğŸŒ™ æ·±å¤œç»Ÿè®¡",-1)),e("ul",null,[e("li",null,"æ·±å¤œcommitï¼š"+r(o.member.night_owl_commits)+" ä¸ª",1),e("li",null,"æ·±å¤œæ¯”ä¾‹ï¼š"+r(o.member.night_owl_percentage)+"%",1),e("li",null,"å¤œçŒ«åˆ†æ•°ï¼š"+r(o.member.night_owl_score)+" åˆ†",1),e("li",null,"æ´»è·ƒå¤©æ•°ï¼š"+r(o.member.active_days)+" å¤©",1)])]),e("div",Es,[t[9]||(t[9]=e("h6",null,"ğŸ“Š æ—¶æ®µåˆ†æ",-1)),e("div",Rs,[(n(),i(T,null,V(g,s=>e("div",{key:s,class:"hour-detail"},[e("span",As,r(s)+":00",1),e("span",Bs,r(o.member.beijing_hourly_distribution[s]||0),1)])),64))])])]),x.value.length?(n(),i("div",Ls,[t[12]||(t[12]=e("h6",null,"ğŸŒƒ æ·±å¤œæäº¤è®°å½•",-1)),e("div",Fs,[(n(!0),i(T,null,V(x.value.slice(0,3),s=>(n(),i("div",{key:s.url,class:"commit-message night-commit"},[e("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`æŸ¥çœ‹æäº¤è¯¦æƒ…: ${s.message}`},[e("div",qs,r(s.message),1),e("div",Gs,[e("span",Ws,r(s.repo),1),t[10]||(t[10]=B(" â€¢ ",-1)),e("span",Js,r(_(s.beijing_hour)),1),B(" â€¢ "+r(s.date)+" ",1),t[11]||(t[11]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Us)]))),128))])])):w("",!0)])],2)):w("",!0),t[13]||(t[13]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6))}},Qs=L(Zs,[["__scopeId","data-v-0cf7641f"]]),Ys={class:"card-header card-header-base"},Xs={class:"stats-badge"},Ks={class:"count"},Is={class:"update-info-section"},ta={class:"time-info"},ea={class:"update-time"},sa={class:"leaderboard-content"},aa={key:0,class:"loading-state"},oa={key:1,class:"error-state"},na={key:2,class:"empty-state"},la={key:0},ia={key:1},ra={key:2,class:"empty-hint"},ca={key:3,class:"empty-hint"},da={key:3,class:"commits-list"},ua={key:0,class:"card-footer"},ma={class:"ranking-info"},ha={__name:"NightOwlCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(o){const m=o,h=S(!1),c=S(null),f=S(null),D=S(null),$=S(!1),v=M(()=>{var _;if(!((_=f.value)!=null&&_.user_commits))return[];const d=[];let l=0;for(const[k,a]of Object.entries(f.value.user_commits))if(a.night_owl_commits>=1){const t=m.membersData.find(u=>u.id===k);if(m.showOnlyOrgMembers){const u=!!t,y=Q(k,m.organizationMembers);if(l<3&&(console.log(`ğŸŒ™ æ·±å¤œçŒ«å¤´é¹°æ¦œ - æ£€æŸ¥ç”¨æˆ· ${k}:`,{hasMemberInfo:u,isOrgMember:y,hasAvatar:t==null?void 0:t.avatar,passed:u&&y}),l++),!t||!y)continue}const s={user_key:k,id:(t==null?void 0:t.id)||k,name:(t==null?void 0:t.name)||null,display_name:x(k,t),github_username:O(k),avatar:(t==null?void 0:t.avatar)||null,location:(t==null?void 0:t.location)||null,company:(t==null?void 0:t.company)||null,domain:(t==null?void 0:t.domain)||"",followers:(t==null?void 0:t.followers)??(t==null?void 0:t.followers_count)??0,total_stars:(t==null?void 0:t.total_stars)??(t==null?void 0:t.stars)??0,public_repos:(t==null?void 0:t.public_repos)??(t==null?void 0:t.repo_count)??0,...a,night_owl_score:P(a)};m.selectedDomain?t&&t.domain&&t.domain.includes(m.selectedDomain)&&d.push(s):d.push(s)}return d.sort((k,a)=>a.night_owl_score-k.night_owl_score)}),C=M(()=>{const d=$.value?m.topCount:Math.min(5,m.topCount);return v.value.slice(0,d)}),g=M(()=>v.value.reduce((d,l)=>d+l.night_owl_commits,0)),b=M(()=>{var d;if(!((d=f.value)!=null&&d.update_time))return"æœªçŸ¥";try{return new Date(f.value.update_time).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"æœªçŸ¥"}}),x=(d,l)=>l!=null&&l.name&&l.name!=="null"&&l.name!=="undefined"&&l.name!=="None"&&l.name.trim()!==""?l.name:l!=null&&l.id?l.id:d.includes("@")?d.split("@")[0]:d,O=d=>d.includes("@")?d.split("@")[0]:d,P=d=>{let l=0;l+=d.night_owl_commits*2;const _=d.night_owl_percentage||0;_>=50?l+=10:_>=30?l+=5:_>=20&&(l+=2);const k=d.active_days||0;k>=5?l+=8:k>=3&&(l+=4);const a=d.repo_count||0;return a>=3?l+=3:a>=2&&(l+=1),Math.round(l)},E=d=>{D.value===d?D.value=null:D.value=d},H=async()=>{try{h.value=!0,c.value=null;const l="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),_=await fetch(l);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);f.value=await _.json()}catch(d){c.value=d.message,console.error("åŠ è½½commitæ•°æ®å¤±è´¥:",d)}finally{h.value=!1}},R=()=>{$.value=!$.value};return Z(()=>{H()}),(d,l)=>{var _;return n(),i("div",{class:N(["night-owl-card leaderboard-card-base","theme-night"])},[e("div",Ys,[l[1]||(l[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-moon"},"ğŸŒ™"),e("div",null,[e("h3",{class:"title title-base"},"å¤œçŒ«æ¦œ"),e("p",{class:"description description-base"},"æ·±å¤œæ—¶æ®µï¼ˆ22:00-06:00ï¼‰ä»£ç æäº¤æ´»è·ƒåº¦æ’è¡Œ")])],-1)),e("div",Xs,[e("span",Ks,r(v.value.length),1),l[0]||(l[0]=e("span",{class:"label"},"å¤œçŒ«å­",-1))])]),e("div",Is,[e("div",ta,[l[2]||(l[2]=e("span",{class:"time-label"},"ğŸŒƒ æœ€è¿‘7å¤©æ·±å¤œæ´»åŠ¨æ•°æ®",-1)),e("span",ea,r(b.value),1)])]),e("div",sa,[h.value?(n(),i("div",aa,[...l[3]||(l[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½å¤œçŒ«æ•°æ®...",-1)])])):c.value?(n(),i("div",oa,[e("p",null,"âŒ "+r(c.value),1),e("button",{onClick:H,class:"retry-btn"},"é‡è¯•")])):v.value.length===0?(n(),i("div",na,[l[4]||(l[4]=e("div",{class:"empty-icon"},"ğŸ˜´",-1)),o.showOnlyOrgMembers?(n(),i("p",la,"ç»„ç»‡æˆå‘˜æœ¬å‘¨æš‚æ— æ·±å¤œæäº¤æ´»åŠ¨")):(n(),i("p",ia,"æœ¬å‘¨æš‚æ— æ·±å¤œæäº¤æ´»åŠ¨")),o.showOnlyOrgMembers?(n(),i("p",ra,"ç»„ç»‡æˆå‘˜ä»¬æ—©ç¡æ—©èµ·èº«ä½“å¥½ï¼")):(n(),i("p",ca,"æ—©ç¡æ—©èµ·èº«ä½“å¥½ï¼"))])):(n(),i("div",da,[(n(!0),i(T,null,V(C.value,(k,a)=>(n(),G(Qs,{key:k.user_key,member:k,rank:a+1,"animation-delay":a*100,"show-details":D.value===k.user_key,onToggleDetails:E},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),v.value.length>0?(n(),i("div",ua,[e("div",ma,[e("span",null,"å¤œçŒ«ç‹ï¼š"+r((_=v.value[0])==null?void 0:_.display_name),1),e("span",null,"æ€»æ·±å¤œcommitæ•°ï¼š"+r(g.value),1)]),v.value.length>5?(n(),i("button",{key:0,onClick:R,class:"expand-btn"},[B(r($.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:N(["arrow",{expanded:$.value}])},"â–¼",2)])):w("",!0)])):w("",!0)])}}},va=L(ha,[["__scopeId","data-v-babd46a6"]]),ga={class:"rankings-container"},pa={key:0,class:"loading-state"},ba={key:1,class:"error-state"},ya={key:2,class:"rankings-content"},_a={class:"filters-section"},fa={class:"filter-group"},$a=["value"],ka={class:"filter-group"},wa={class:"filter-group checkbox-group"},Da={class:"checkbox-label"},Ca={class:"weekly-commits-section"},Sa={class:"night-owl-section"},xa={class:"leaderboards-grid"},Ma={class:"update-info"},Oa={__name:"Rankings",setup(o){const m=S(!0),h=S(null),c=S([]),f=S(null),D=S(""),$=S(20),v=S(!1),C=S(new Set),g=M(()=>{const t=new Set;return c.value.forEach(s=>{s.domain&&s.domain.split(";").forEach(u=>t.add(u.trim()))}),Array.from(t).sort()}),b=M(()=>{let t=c.value;return D.value&&(t=t.filter(s=>s.domain&&s.domain.includes(D.value))),v.value&&(console.log("ğŸ” ç»„ç»‡æˆå‘˜ç­›é€‰å·²å¯ç”¨"),console.log(`ğŸ“‹ ç»„ç»‡æˆå‘˜åå•å¤§å°: ${C.value.size}`),console.log(`ğŸ“Š ç­›é€‰å‰æˆå‘˜æ€»æ•°: ${t.length}`),t=t.filter(s=>{const u=Q(s.id,C.value),y=!!s.avatar,p=!!s.id,z=!!s.domain;return t.indexOf(s)<3&&console.log(`  æ£€æŸ¥æˆå‘˜ ${s.id}:`,{isOrgMember:u,hasAvatar:y,hasId:p,hasDomain:z,passed:u&&y&&p&&z}),u&&y&&p&&z}),console.log(`âœ… ç­›é€‰åæˆå‘˜æ€»æ•°: ${t.length}`)),t}),x=M(()=>[{id:"popularity",title:"äººæ°”ç‹æ¦œ",description:"ç»¼åˆä¸ªäºº Followers å’Œç»„ç»‡ä»“åº“ Stars çš„å½±å“åŠ›æ’è¡Œ",icon:"ğŸ‘‘",colorScheme:"fire",showTrend:!1,data:E()},{id:"productive",title:"å¤šäº§æ¦œ",description:"åŸºäºå‚ä¸ç»„ç»‡ä»“åº“æ•°é‡çš„è´¡çŒ®å¹¿åº¦æ’è¡Œ",icon:"ğŸ†",colorScheme:"blue",showTrend:!1,data:H()},{id:"social",title:"ç¤¾äº¤è¾¾äººæ¦œ",description:"åŸºäº Following æ•°é‡çš„ç¤¾äº¤æ´»è·ƒåº¦æ’è¡Œ",icon:"ğŸ’¬",colorScheme:"green",showTrend:!1,data:R()},{id:"rising",title:"æ–°æ˜Ÿæ¦œ",description:"åŸºäºç»„ç»‡è´¡çŒ®æ´»è·ƒåº¦çš„æ½œåŠ›æ–°æ˜Ÿæ’è¡Œ",icon:"ğŸŒ ",colorScheme:"purple",showTrend:!1,data:d()},{id:"comprehensive",title:"ç»¼åˆå®åŠ›æ¦œ",description:"åŸºäºç»„ç»‡è´¡çŒ®çš„å¤šç»´åº¦ç»¼åˆè¯„åˆ†æ’è¡Œ",icon:"ğŸŒŸ",colorScheme:"gold",showTrend:!1,data:l()}]),O=M(()=>{var t;return(t=f.value)!=null&&t.update_time?new Date(f.value.update_time).toLocaleString("zh-CN"):new Date().toLocaleString("zh-CN")}),P=M(()=>{const t=new Date;return t.setDate(t.getDate()+1),t.setHours(6,0,0,0),t.toLocaleString("zh-CN")});function E(){return b.value.map(t=>({...t,score:(t.followers||0)*.6+(t.org_total_stars||0)*.4,scoreDisplay:`${t.followers||0} followers + ${t.org_total_stars||0} ç»„ç»‡stars`})).filter(t=>t.score>0).sort((t,s)=>s.score-t.score).slice(0,$.value).map((t,s)=>({...t,rank:s+1}))}function H(){return b.value.map(t=>({...t,score:t.org_repos_count||0,scoreDisplay:`å‚ä¸ ${t.org_repos_count||0} ä¸ªç»„ç»‡ä»“åº“`})).filter(t=>t.score>=1).sort((t,s)=>s.score-t.score).slice(0,$.value).map((t,s)=>({...t,rank:s+1}))}function R(){return b.value.map(t=>({...t,score:t.following||0,scoreDisplay:`å…³æ³¨ ${t.following||0} äºº`})).filter(t=>t.score>=10).sort((t,s)=>s.score-t.score).slice(0,$.value).map((t,s)=>({...t,rank:s+1}))}function d(){return b.value.map(t=>{const s=Math.max(t.org_repos_count||1,1),y=((t.followers||0)+(t.org_total_stars||0))/s*(s<5?1.5:1);return{...t,score:y,scoreDisplay:`æ´»è·ƒåº¦ ${Math.round(y)}`}}).filter(t=>t.score>0).sort((t,s)=>s.score-t.score).slice(0,$.value).map((t,s)=>({...t,rank:s+1}))}function l(){return b.value.map(t=>{const s=(t.org_total_stars||0)*.3,u=(t.followers||0)*.25,y=(t.org_repos_count||0)*.2,p=(t.following||0)*.15,z=(t.org_total_contributions||0)*.1,j=s+u+y+p+z;return{...t,score:j,scoreDisplay:`ç»¼åˆåˆ† ${Math.round(j)}`}}).filter(t=>t.score>0).sort((t,s)=>s.score-t.score).slice(0,$.value).map((t,s)=>({...t,rank:s+1}))}const _=async()=>{try{m.value=!0,h.value=null;const t="/members-visualization/",s=`${t}data/members.json`.replace(/\/+/g,"/"),u=`${t}data/commits_weekly.json`.replace(/\/+/g,"/"),[y,p]=await Promise.all([fetch(s),fetch(u)]);if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const z=await y.json();c.value=z.map(A=>(Object.keys(A).forEach(F=>{let q=A[F]||"";typeof q=="string"&&(q=q.trim().replace(/^"|"$/g,"")),A[F]=q}),A)),p.ok&&(f.value=await p.json());const j=st("/data/datawhale_member.json");C.value=await Ae(j)}catch(t){h.value=t.message,console.error("åŠ è½½æ•°æ®å¤±è´¥:",t)}finally{m.value=!1}},k=()=>{},a=()=>{D.value="",v.value=!1};return Z(()=>{_()}),(t,s)=>(n(),i("div",ga,[m.value?(n(),i("div",pa,[...s[3]||(s[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½æ¦œå•æ•°æ®...",-1)])])):h.value?(n(),i("div",ba,[e("p",null,"âŒ åŠ è½½å¤±è´¥: "+r(h.value),1),e("button",{onClick:_,class:"retry-btn"},"é‡è¯•")])):(n(),i("div",ya,[e("div",_a,[e("div",fa,[s[5]||(s[5]=e("label",null,"ç ”ç©¶æ–¹å‘ç­›é€‰ï¼š",-1)),W(e("select",{"onUpdate:modelValue":s[0]||(s[0]=u=>D.value=u),onChange:k},[s[4]||(s[4]=e("option",{value:""},"å…¨éƒ¨æ–¹å‘",-1)),(n(!0),i(T,null,V(g.value,u=>(n(),i("option",{key:u,value:u},r(u),9,$a))),128))],544),[[Y,D.value]])]),e("div",ka,[s[7]||(s[7]=e("label",null,"æ˜¾ç¤ºæ•°é‡ï¼š",-1)),W(e("select",{"onUpdate:modelValue":s[1]||(s[1]=u=>$.value=u),onChange:k},[...s[6]||(s[6]=[e("option",{value:10},"Top 10",-1),e("option",{value:20},"Top 20",-1),e("option",{value:50},"Top 50",-1)])],544),[[Y,$.value]])]),e("div",wa,[e("label",Da,[W(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=u=>v.value=u),onChange:k,class:"checkbox-input"},null,544),[[et,v.value]]),s[8]||(s[8]=e("span",{class:"checkbox-text"},"ä»…æ˜¾ç¤ºç»„ç»‡æˆå‘˜",-1))])]),D.value||v.value?(n(),i("button",{key:0,onClick:a,class:"clear-filters-btn"}," æ¸…é™¤ç­›é€‰ ")):w("",!0)]),e("div",Ca,[J(os,{"members-data":c.value,"selected-domain":D.value,"top-count":$.value,"show-only-org-members":v.value,"organization-members":C.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",Sa,[J(va,{"members-data":c.value,"selected-domain":D.value,"top-count":$.value,"show-only-org-members":v.value,"organization-members":C.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",xa,[(n(!0),i(T,null,V(x.value,u=>(n(),G(Jt,{key:u.id,title:u.title,description:u.description,icon:u.icon,members:u.data,"color-scheme":u.colorScheme,"show-trend":u.showTrend},null,8,["title","description","icon","members","color-scheme","show-trend"]))),128))]),e("div",Ma,[e("p",null,"ğŸ“… æ•°æ®æœ€åæ›´æ–°æ—¶é—´ï¼š"+r(O.value),1),e("p",null,"ğŸ”„ ä¸‹æ¬¡æ›´æ–°æ—¶é—´ï¼š"+r(P.value),1)])]))]))}},Na=L(Oa,[["__scopeId","data-v-78381141"]]),za=JSON.parse('{"title":"ğŸ† è´¡çŒ®è€…æ¦œå•","description":"","frontmatter":{},"headers":[],"relativePath":"rankings.md","filePath":"rankings.md","lastUpdated":1771164395000}'),Ta={name:"rankings.md"},Ha=Object.assign(Ta,{setup(o){return(m,h)=>(n(),i("div",null,[h[0]||(h[0]=e("h1",{id:"ğŸ†-è´¡çŒ®è€…æ¦œå•",tabindex:"-1"},[B("ğŸ† è´¡çŒ®è€…æ¦œå• "),e("a",{class:"header-anchor",href:"#ğŸ†-è´¡çŒ®è€…æ¦œå•","aria-label":'Permalink to "ğŸ† è´¡çŒ®è€…æ¦œå•"'},"â€‹")],-1)),h[1]||(h[1]=e("p",null,"åŸºäº GitHub æ•°æ®çš„å¤šç»´åº¦æ’è¡Œæ¦œï¼Œæ”¯æŒæŒ‰ç ”ç©¶æ–¹å‘ç­›é€‰ã€‚",-1)),J(Na),h[2]||(h[2]=at("",3))]))}});export{za as __pageData,Ha as default};
